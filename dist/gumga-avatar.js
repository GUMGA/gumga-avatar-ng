/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "dist";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no exports provided */
/*! all exports used */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__component__ = __webpack_require__(/*! ./component */ 1);\n\nwindow['angular']\n    .module('gumga.avatar', [])\n    .component('gumgaAvatar', __WEBPACK_IMPORTED_MODULE_0__component__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9pbmRleC50cz9lYWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnQnO1xuXG53aW5kb3dbJ2FuZ3VsYXInXVxuICAgIC5tb2R1bGUoJ2d1bWdhLmF2YXRhcicsIFtdKVxuICAgIC5jb21wb25lbnQoJ2d1bWdhQXZhdGFyJywgQ29tcG9uZW50KTtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXgudHMiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!**************************!*\
  !*** ./src/component.ts ***!
  \**************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__component_scss__ = __webpack_require__(/*! ./component.scss */ 2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__component_scss___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__component_scss__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__crop_modal_controller__ = __webpack_require__(/*! ./crop/modal.controller */ 3);\n\n\nvar Component = {\n    bindings: {\n        height: '@?',\n        width: '@?',\n        ngModel: '=',\n        pickerText: '@?',\n        cropTitle: '@?',\n        type: '@?',\n        useGumgaImage: '=?'\n    },\n    template: __webpack_require__(/*! ./component.html */ 10),\n    controller: ['$timeout', '$attrs', '$element', '$uibModal', function ($timeout, $attrs, $element, $uibModal) {\n            var ctrl = this;\n            ctrl.$onInit = function () {\n                ctrl.width = ctrl.width || 170;\n                ctrl.height = ctrl.height || 170;\n                ctrl.useGumgaImage = ctrl.useGumgaImage || false;\n                ctrl.type = ctrl.type || 'square';\n                ctrl.input = $element.find('input[type=\"file\"]');\n                ctrl.input.change(function (evt) { return ctrl.changeImage(evt); });\n                if (ctrl.ngModel && ctrl.useGumgaImage) {\n                    ctrl.image = 'data:' + ctrl.ngModel.mimeType + ';base64,' + ctrl.ngModel.bytes;\n                }\n                if (ctrl.ngModel && !ctrl.useGumgaImage) {\n                    ctrl.image = ctrl.ngModel;\n                }\n            };\n            ctrl.changeImage = function (evt) {\n                if (ctrl.input[0].files && ctrl.input[0].files[0]) {\n                    var file = ctrl.input[0].files[0];\n                    var reader = new FileReader();\n                    reader.readAsDataURL(file);\n                    reader.onload = function (evt) {\n                        ctrl.input[0].value = '';\n                        ctrl.openModalCropImage(evt.target.result);\n                    };\n                }\n            };\n            ctrl.setPicture = function (image) {\n                //TRANSFORMA PRA OBJETO\n                if (image && ctrl.useGumgaImage) {\n                    ctrl.image = image;\n                    var mimeType = image.substring((image.indexOf(':') + 1), image.indexOf(';'));\n                    var picture = {\n                        mimeType: mimeType,\n                        name: 'picture.' + (mimeType.substring((mimeType.lastIndexOf('/') + 1), mimeType.length)),\n                        bytes: image.substring((image.indexOf(',') + 1), image.length),\n                        size: Math.round((image.length * 6) / 8)\n                    };\n                    ctrl.ngModel = picture;\n                }\n                //COM URL\n                if (image && !ctrl.useGumgaImage) {\n                    ctrl.image = image;\n                    ctrl.ngModel = image;\n                }\n            };\n            ctrl.openModalCropImage = function (image) {\n                var modalInstance = $uibModal.open({\n                    template: __webpack_require__(/*! ./crop/modal.crop.html */ 11),\n                    controller: __WEBPACK_IMPORTED_MODULE_1__crop_modal_controller__[\"a\" /* default */],\n                    controllerAs: '$ctrl',\n                    backdrop: 'static',\n                    openedClass: 'gumga-avatar',\n                    size: 'md',\n                    resolve: {\n                        image: function () { return image; },\n                        cropTitle: function () { return ctrl.cropTitle; },\n                        width: function () { return ctrl.width; },\n                        height: function () { return ctrl.height; },\n                        type: function () { return ctrl.type; }\n                    }\n                });\n                modalInstance.result.then(function (imageCropped) {\n                    if (imageCropped) {\n                        ctrl.setPicture(imageCropped);\n                    }\n                });\n            };\n        }]\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnQudHM/ODlhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJkZWNsYXJlIGZ1bmN0aW9uIHJlcXVpcmUobmFtZTogc3RyaW5nKTtcbmltcG9ydCAnLi9jb21wb25lbnQuc2Nzcyc7XG5cbmltcG9ydCBNb2RhbENyb3BDb250cm9sbGVyIGZyb20gJy4vY3JvcC9tb2RhbC5jb250cm9sbGVyJztcblxubGV0IENvbXBvbmVudCA9IHtcbiAgICBiaW5kaW5nczoge1xuICAgICAgICBoZWlnaHQ6ICdAPycsXG4gICAgICAgIHdpZHRoOiAnQD8nLFxuICAgICAgICBuZ01vZGVsOiAnPScsXG4gICAgICAgIHBpY2tlclRleHQ6ICdAPycsXG4gICAgICAgIGNyb3BUaXRsZTogJ0A/JyxcbiAgICAgICAgdHlwZTogJ0A/JywgLy8gc3F1YXJlfGNpcmNsZVxuICAgICAgICB1c2VHdW1nYUltYWdlOiAnPT8nXG4gICAgfSxcbiAgICB0ZW1wbGF0ZTogcmVxdWlyZSgnLi9jb21wb25lbnQuaHRtbCcpLFxuICAgIGNvbnRyb2xsZXI6IFsnJHRpbWVvdXQnLCAnJGF0dHJzJywgJyRlbGVtZW50JywgJyR1aWJNb2RhbCcsIGZ1bmN0aW9uICgkdGltZW91dCwgJGF0dHJzLCAkZWxlbWVudCwgJHVpYk1vZGFsKSB7XG4gICAgICAgIGxldCBjdHJsID0gdGhpcztcblxuICAgICAgICBjdHJsLiRvbkluaXQgPSAoKSA9PiB7XG4gICAgICAgICAgICBjdHJsLndpZHRoID0gY3RybC53aWR0aCB8fCAxNzA7XG4gICAgICAgICAgICBjdHJsLmhlaWdodCA9IGN0cmwuaGVpZ2h0IHx8IDE3MDtcbiAgICAgICAgICAgIGN0cmwudXNlR3VtZ2FJbWFnZSA9IGN0cmwudXNlR3VtZ2FJbWFnZSB8fCBmYWxzZTtcbiAgICAgICAgICAgIGN0cmwudHlwZSA9IGN0cmwudHlwZSB8fCAnc3F1YXJlJztcbiAgICAgICAgICAgIGN0cmwuaW5wdXQgPSAkZWxlbWVudC5maW5kKCdpbnB1dFt0eXBlPVwiZmlsZVwiXScpO1xuICAgICAgICAgICAgY3RybC5pbnB1dC5jaGFuZ2UoKGV2dCkgPT4gY3RybC5jaGFuZ2VJbWFnZShldnQpKTtcbiAgICAgICAgICAgIGlmKGN0cmwubmdNb2RlbCAmJiBjdHJsLnVzZUd1bWdhSW1hZ2Upe1xuICAgICAgICAgICAgICAgIGN0cmwuaW1hZ2UgPSAnZGF0YTonICsgY3RybC5uZ01vZGVsLm1pbWVUeXBlICsgJztiYXNlNjQsJyArIGN0cmwubmdNb2RlbC5ieXRlcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGN0cmwubmdNb2RlbCAmJiAhY3RybC51c2VHdW1nYUltYWdlKXtcbiAgICAgICAgICAgICAgICBjdHJsLmltYWdlID0gY3RybC5uZ01vZGVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3RybC5jaGFuZ2VJbWFnZSA9IChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChjdHJsLmlucHV0WzBdLmZpbGVzICYmIGN0cmwuaW5wdXRbMF0uZmlsZXNbMF0pIHtcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGN0cmwuaW5wdXRbMF0uZmlsZXNbMF07XG4gICAgICAgICAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgICAgICAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldnQ6IGFueSkge1xuICAgICAgICAgICAgICAgICAgICBjdHJsLmlucHV0WzBdLnZhbHVlID0gJyc7XG4gICAgICAgICAgICAgICAgICAgIGN0cmwub3Blbk1vZGFsQ3JvcEltYWdlKGV2dC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY3RybC5zZXRQaWN0dXJlID0gKGltYWdlKSA9PiB7XG4gICAgICAgICAgICAvL1RSQU5TRk9STUEgUFJBIE9CSkVUT1xuICAgICAgICAgICAgaWYoaW1hZ2UgJiYgY3RybC51c2VHdW1nYUltYWdlKXtcbiAgICAgICAgICAgICAgICBjdHJsLmltYWdlID0gaW1hZ2U7XG4gICAgICAgICAgICAgICAgbGV0IG1pbWVUeXBlID0gaW1hZ2Uuc3Vic3RyaW5nKChpbWFnZS5pbmRleE9mKCc6JykgKyAxKSwgaW1hZ2UuaW5kZXhPZignOycpKTtcbiAgICAgICAgICAgICAgICBsZXQgcGljdHVyZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IG1pbWVUeXBlLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAncGljdHVyZS4nICsgKG1pbWVUeXBlLnN1YnN0cmluZygobWltZVR5cGUubGFzdEluZGV4T2YoJy8nKSsxKSwgbWltZVR5cGUubGVuZ3RoKSksXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzOiBpbWFnZS5zdWJzdHJpbmcoKGltYWdlLmluZGV4T2YoJywnKSArIDEpLCBpbWFnZS5sZW5ndGgpLFxuICAgICAgICAgICAgICAgICAgICBzaXplOiBNYXRoLnJvdW5kKChpbWFnZS5sZW5ndGggKiA2KSAvIDgpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjdHJsLm5nTW9kZWwgPSBwaWN0dXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9DT00gVVJMXG4gICAgICAgICAgICBpZihpbWFnZSAmJiAhY3RybC51c2VHdW1nYUltYWdlKXtcbiAgICAgICAgICAgICAgICBjdHJsLmltYWdlICAgPSBpbWFnZTtcbiAgICAgICAgICAgICAgICBjdHJsLm5nTW9kZWwgPSBpbWFnZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGN0cmwub3Blbk1vZGFsQ3JvcEltYWdlID0gaW1hZ2UgPT4ge1xuICAgICAgICAgICAgbGV0IG1vZGFsSW5zdGFuY2UgPSAkdWliTW9kYWwub3Blbih7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHJlcXVpcmUoJy4vY3JvcC9tb2RhbC5jcm9wLmh0bWwnKSxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBNb2RhbENyb3BDb250cm9sbGVyLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJyRjdHJsJyxcbiAgICAgICAgICAgICAgICBiYWNrZHJvcDogJ3N0YXRpYycsXG4gICAgICAgICAgICAgICAgb3BlbmVkQ2xhc3M6ICdndW1nYS1hdmF0YXInLFxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCcsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZTogKCkgPT4gaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgIGNyb3BUaXRsZTogKCkgPT4gY3RybC5jcm9wVGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAoKSA9PiBjdHJsLndpZHRoLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6ICgpID0+IGN0cmwuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAoKSA9PiBjdHJsLnR5cGVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oZnVuY3Rpb24gKGltYWdlQ3JvcHBlZCkge1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZUNyb3BwZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY3RybC5zZXRQaWN0dXJlKGltYWdlQ3JvcHBlZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgIH1dXG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvbmVudDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvY29tcG9uZW50LnRzIl0sIm1hcHBpbmdzIjoiQUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!****************************!*\
  !*** ./src/component.scss ***!
  \****************************/
/*! dynamic exports provided */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jb21wb25lbnQuc2Nzcz9kYmE4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIHJlbW92ZWQgYnkgZXh0cmFjdC10ZXh0LXdlYnBhY2stcGx1Z2luXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvY29tcG9uZW50LnNjc3Ncbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!**************************************!*\
  !*** ./src/crop/modal.controller.ts ***!
  \**************************************/
/*! exports provided: default */
/*! exports used: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_croppie_croppie_css__ = __webpack_require__(/*! croppie/croppie.css */ 4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_croppie_croppie_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_croppie_croppie_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_croppie__ = __webpack_require__(/*! croppie */ 5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_croppie___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_croppie__);\n\n\nvar ModalCropController = ['image', '$uibModalInstance', 'cropTitle', 'width', 'height', 'type',\n    function (image, $uibModalInstance, cropTitle, width, height, type) {\n        var ctrl = this;\n        ctrl.$onInit = function () {\n            ctrl.cropTitle = cropTitle;\n        };\n        ctrl.close = function () {\n            $uibModalInstance.close();\n        };\n        ctrl.createCrop = function () {\n            ctrl.crop = new __WEBPACK_IMPORTED_MODULE_1_croppie___default.a(document.getElementById('cropElem'), {\n                viewport: { width: width, height: height, type: type }\n            });\n            ctrl.crop.bind({\n                url: image\n            });\n        };\n        ctrl.save = function () {\n            ctrl.crop.result().then(function (resp) {\n                $uibModalInstance.close(resp);\n            });\n        };\n    }];\n/* harmony default export */ __webpack_exports__[\"a\"] = (ModalCropController);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9jcm9wL21vZGFsLmNvbnRyb2xsZXIudHM/MDc2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgJ2Nyb3BwaWUvY3JvcHBpZS5jc3MnO1xuaW1wb3J0IENyb3BwaWUgZnJvbSAnY3JvcHBpZSc7XG5cbmxldCBNb2RhbENyb3BDb250cm9sbGVyID0gWydpbWFnZScsICckdWliTW9kYWxJbnN0YW5jZScsICdjcm9wVGl0bGUnLCAnd2lkdGgnLCAnaGVpZ2h0JywgJ3R5cGUnLFxuZnVuY3Rpb24oaW1hZ2UsICR1aWJNb2RhbEluc3RhbmNlLCBjcm9wVGl0bGUsIHdpZHRoLCBoZWlnaHQsIHR5cGUpe1xuICAgIGxldCBjdHJsID0gdGhpcztcblxuICAgIGN0cmwuJG9uSW5pdCA9ICgpID0+IHtcbiAgICAgICAgY3RybC5jcm9wVGl0bGUgPSBjcm9wVGl0bGU7XG4gICAgfVxuXG4gICAgY3RybC5jbG9zZSA9ICgpID0+IHtcbiAgICAgICAgJHVpYk1vZGFsSW5zdGFuY2UuY2xvc2UoKTtcbiAgICB9XG4gICAgXG4gICAgY3RybC5jcmVhdGVDcm9wID0gKCkgPT4ge1xuICAgICAgICBjdHJsLmNyb3AgPSBuZXcgQ3JvcHBpZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JvcEVsZW0nKSwge1xuICAgICAgICAgICAgdmlld3BvcnQ6IHsgd2lkdGg6IHdpZHRoLCBoZWlnaHQ6IGhlaWdodCwgdHlwZTogdHlwZSB9XG4gICAgICAgIH0pO1xuICAgICAgICBjdHJsLmNyb3AuYmluZCh7XG4gICAgICAgICAgICB1cmw6IGltYWdlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGN0cmwuc2F2ZSA9ICgpID0+IHtcbiAgICAgICAgY3RybC5jcm9wLnJlc3VsdCgpLnRoZW4ocmVzcCA9PiB7XG4gICAgICAgICAgICAkdWliTW9kYWxJbnN0YW5jZS5jbG9zZShyZXNwKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbn1dXG5cbmV4cG9ydCBkZWZhdWx0IE1vZGFsQ3JvcENvbnRyb2xsZXI7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2Nyb3AvbW9kYWwuY29udHJvbGxlci50cyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!******************************************!*\
  !*** ./node_modules/croppie/croppie.css ***!
  \******************************************/
/*! dynamic exports provided */
/***/ (function(module, exports) {

eval("// removed by extract-text-webpack-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jcm9wcGllL2Nyb3BwaWUuY3NzPzljNTQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jcm9wcGllL2Nyb3BwaWUuY3NzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!*****************************************!*\
  !*** ./node_modules/croppie/croppie.js ***!
  \*****************************************/
/*! dynamic exports provided */
/*! exports used: default */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(setImmediate) {var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*************************\r\n * Croppie\r\n * Copyright 2017\r\n * Foliotek\r\n * Version: 2.5.1\r\n *************************/\r\n(function (root, factory) {\r\n    if (true) {\r\n        // AMD. Register as an anonymous module.\r\n        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [exports], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n    } else if (typeof exports === 'object' && typeof exports.nodeName !== 'string') {\r\n        // CommonJS\r\n        factory(exports);\r\n    } else {\r\n        // Browser globals\r\n        factory((root.commonJsStrict = {}));\r\n    }\r\n}(this, function (exports) {\r\n\r\n    /* Polyfills */\r\n    if (typeof Promise !== 'function') {\r\n        /*! promise-polyfill 3.1.0 */\r\n        !function(a){function b(a,b){return function(){a.apply(b,arguments)}}function c(a){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof a)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],i(a,b(e,this),b(f,this))}function d(a){var b=this;return null===this._state?void this._deferreds.push(a):void k(function(){var c=b._state?a.onFulfilled:a.onRejected;if(null===c)return void(b._state?a.resolve:a.reject)(b._value);var d;try{d=c(b._value)}catch(e){return void a.reject(e)}a.resolve(d)})}function e(a){try{if(a===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(a&&(\"object\"==typeof a||\"function\"==typeof a)){var c=a.then;if(\"function\"==typeof c)return void i(b(c,a),b(e,this),b(f,this))}this._state=!0,this._value=a,g.call(this)}catch(d){f.call(this,d)}}function f(a){this._state=!1,this._value=a,g.call(this)}function g(){for(var a=0,b=this._deferreds.length;b>a;a++)d.call(this,this._deferreds[a]);this._deferreds=null}function h(a,b,c,d){this.onFulfilled=\"function\"==typeof a?a:null,this.onRejected=\"function\"==typeof b?b:null,this.resolve=c,this.reject=d}function i(a,b,c){var d=!1;try{a(function(a){d||(d=!0,b(a))},function(a){d||(d=!0,c(a))})}catch(e){if(d)return;d=!0,c(e)}}var j=setTimeout,k=\"function\"==typeof setImmediate&&setImmediate||function(a){j(a,1)},l=Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)};c.prototype[\"catch\"]=function(a){return this.then(null,a)},c.prototype.then=function(a,b){var e=this;return new c(function(c,f){d.call(e,new h(a,b,c,f))})},c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&(\"object\"==typeof g||\"function\"==typeof g)){var h=g.then;if(\"function\"==typeof h)return void h.call(g,function(a){d(f,a)},c)}a[f]=g,0===--e&&b(a)}catch(i){c(i)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})},c.resolve=function(a){return a&&\"object\"==typeof a&&a.constructor===c?a:new c(function(b){b(a)})},c.reject=function(a){return new c(function(b,c){c(a)})},c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;e>d;d++)a[d].then(b,c)})},c._setImmediateFn=function(a){k=a},\"undefined\"!=typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)}(this);\r\n    }\r\n\r\n    if ( typeof window.CustomEvent !== \"function\" ) {\r\n        (function(){\r\n            function CustomEvent ( event, params ) {\r\n                params = params || { bubbles: false, cancelable: false, detail: undefined };\r\n                var evt = document.createEvent( 'CustomEvent' );\r\n                evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );\r\n                return evt;\r\n            }\r\n            CustomEvent.prototype = window.Event.prototype;\r\n            window.CustomEvent = CustomEvent;\r\n        }());\r\n    }\r\n\r\n    if (!HTMLCanvasElement.prototype.toBlob) {\r\n        Object.defineProperty(HTMLCanvasElement.prototype, 'toBlob', {\r\n            value: function (callback, type, quality) {\r\n                var binStr = atob( this.toDataURL(type, quality).split(',')[1] ),\r\n                len = binStr.length,\r\n                arr = new Uint8Array(len);\r\n\r\n                for (var i=0; i<len; i++ ) {\r\n                    arr[i] = binStr.charCodeAt(i);\r\n                }\r\n\r\n                callback( new Blob( [arr], {type: type || 'image/png'} ) );\r\n            }\r\n        });\r\n    }\r\n    /* End Polyfills */\r\n\r\n    var cssPrefixes = ['Webkit', 'Moz', 'ms'],\r\n        emptyStyles = document.createElement('div').style,\r\n        CSS_TRANS_ORG,\r\n        CSS_TRANSFORM,\r\n        CSS_USERSELECT;\r\n\r\n    function vendorPrefix(prop) {\r\n        if (prop in emptyStyles) {\r\n            return prop;\r\n        }\r\n\r\n        var capProp = prop[0].toUpperCase() + prop.slice(1),\r\n            i = cssPrefixes.length;\r\n\r\n        while (i--) {\r\n            prop = cssPrefixes[i] + capProp;\r\n            if (prop in emptyStyles) {\r\n                return prop;\r\n            }\r\n        }\r\n    }\r\n\r\n    CSS_TRANSFORM = vendorPrefix('transform');\r\n    CSS_TRANS_ORG = vendorPrefix('transformOrigin');\r\n    CSS_USERSELECT = vendorPrefix('userSelect');\r\n\r\n    // Credits to : Andrew Dupont - http://andrewdupont.net/2009/08/28/deep-extending-objects-in-javascript/\r\n    function deepExtend(destination, source) {\r\n        destination = destination || {};\r\n        for (var property in source) {\r\n            if (source[property] && source[property].constructor && source[property].constructor === Object) {\r\n                destination[property] = destination[property] || {};\r\n                deepExtend(destination[property], source[property]);\r\n            } else {\r\n                destination[property] = source[property];\r\n            }\r\n        }\r\n        return destination;\r\n    }\r\n\r\n    function debounce(func, wait, immediate) {\r\n        var timeout;\r\n        return function () {\r\n            var context = this, args = arguments;\r\n            var later = function () {\r\n                timeout = null;\r\n                if (!immediate) func.apply(context, args);\r\n            };\r\n            var callNow = immediate && !timeout;\r\n            clearTimeout(timeout);\r\n            timeout = setTimeout(later, wait);\r\n            if (callNow) func.apply(context, args);\r\n        };\r\n    }\r\n\r\n    function dispatchChange(element) {\r\n        if (\"createEvent\" in document) {\r\n            var evt = document.createEvent(\"HTMLEvents\");\r\n            evt.initEvent(\"change\", false, true);\r\n            element.dispatchEvent(evt);\r\n        }\r\n        else {\r\n            element.fireEvent(\"onchange\");\r\n        }\r\n    }\r\n\r\n    //http://jsperf.com/vanilla-css\r\n    function css(el, styles, val) {\r\n        if (typeof (styles) === 'string') {\r\n            var tmp = styles;\r\n            styles = {};\r\n            styles[tmp] = val;\r\n        }\r\n\r\n        for (var prop in styles) {\r\n            el.style[prop] = styles[prop];\r\n        }\r\n    }\r\n\r\n    function addClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.add(c);\r\n        }\r\n        else {\r\n            el.className += ' ' + c;\r\n        }\r\n    }\r\n\r\n    function removeClass(el, c) {\r\n        if (el.classList) {\r\n            el.classList.remove(c);\r\n        }\r\n        else {\r\n            el.className = el.className.replace(c, '');\r\n        }\r\n    }\r\n\r\n    function setAttributes(el, attrs) {\r\n        for (var key in attrs) {\r\n            el.setAttribute(key, attrs[key]);\r\n        }\r\n    }\r\n\r\n    function num(v) {\r\n        return parseInt(v, 10);\r\n    }\r\n\r\n    /* Utilities */\r\n    function loadImage(src, imageEl, doExif) {\r\n        var img = imageEl || new Image();\r\n        img.style.opacity = 0;\r\n\r\n        return new Promise(function (resolve) {\r\n            function _resolve() {\r\n                setTimeout(function(){\r\n                    resolve(img);\r\n                }, 1);\r\n            }\r\n\r\n            if (img.src === src) {// If image source hasn't changed resolve immediately\r\n                _resolve();\r\n                return;\r\n            }\r\n\r\n            img.exifdata = null;\r\n            img.removeAttribute('crossOrigin');\r\n            if (src.match(/^https?:\\/\\/|^\\/\\//)) {\r\n                img.setAttribute('crossOrigin', 'anonymous');\r\n            }\r\n            img.onload = function () {\r\n                if (doExif) {\r\n                    EXIF.getData(img, function () {\r\n                        _resolve();\r\n                    });\r\n                }\r\n                else {\r\n                    _resolve();\r\n                }\r\n            };\r\n            img.src = src;\r\n        });\r\n    }\r\n\r\n    function naturalImageDimensions(img) {\r\n        var w = img.naturalWidth;\r\n        var h = img.naturalHeight;\r\n        if (img.exifdata && img.exifdata.Orientation >= 5) {\r\n            var x= w;\r\n            w = h;\r\n            h = x;\r\n        }\r\n        return { width: w, height: h };\r\n    }\r\n\r\n    /* CSS Transform Prototype */\r\n    var TRANSLATE_OPTS = {\r\n        'translate3d': {\r\n            suffix: ', 0px'\r\n        },\r\n        'translate': {\r\n            suffix: ''\r\n        }\r\n    };\r\n    var Transform = function (x, y, scale) {\r\n        this.x = parseFloat(x);\r\n        this.y = parseFloat(y);\r\n        this.scale = parseFloat(scale);\r\n    };\r\n\r\n    Transform.parse = function (v) {\r\n        if (v.style) {\r\n            return Transform.parse(v.style[CSS_TRANSFORM]);\r\n        }\r\n        else if (v.indexOf('matrix') > -1 || v.indexOf('none') > -1) {\r\n            return Transform.fromMatrix(v);\r\n        }\r\n        else {\r\n            return Transform.fromString(v);\r\n        }\r\n    };\r\n\r\n    Transform.fromMatrix = function (v) {\r\n        var vals = v.substring(7).split(',');\r\n        if (!vals.length || v === 'none') {\r\n            vals = [1, 0, 0, 1, 0, 0];\r\n        }\r\n\r\n        return new Transform(num(vals[4]), num(vals[5]), parseFloat(vals[0]));\r\n    };\r\n\r\n    Transform.fromString = function (v) {\r\n        var values = v.split(') '),\r\n            translate = values[0].substring(Croppie.globals.translate.length + 1).split(','),\r\n            scale = values.length > 1 ? values[1].substring(6) : 1,\r\n            x = translate.length > 1 ? translate[0] : 0,\r\n            y = translate.length > 1 ? translate[1] : 0;\r\n\r\n        return new Transform(x, y, scale);\r\n    };\r\n\r\n    Transform.prototype.toString = function () {\r\n        var suffix = TRANSLATE_OPTS[Croppie.globals.translate].suffix || '';\r\n        return Croppie.globals.translate + '(' + this.x + 'px, ' + this.y + 'px' + suffix + ') scale(' + this.scale + ')';\r\n    };\r\n\r\n    var TransformOrigin = function (el) {\r\n        if (!el || !el.style[CSS_TRANS_ORG]) {\r\n            this.x = 0;\r\n            this.y = 0;\r\n            return;\r\n        }\r\n        var css = el.style[CSS_TRANS_ORG].split(' ');\r\n        this.x = parseFloat(css[0]);\r\n        this.y = parseFloat(css[1]);\r\n    };\r\n\r\n    TransformOrigin.prototype.toString = function () {\r\n        return this.x + 'px ' + this.y + 'px';\r\n    };\r\n\r\n    function getExifOrientation (img) {\r\n        return img.exifdata.Orientation;\r\n    }\r\n\r\n    function drawCanvas(canvas, img, orientation) {\r\n        var width = img.width,\r\n            height = img.height,\r\n            ctx = canvas.getContext('2d');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        ctx.save();\r\n        switch (orientation) {\r\n          case 2:\r\n             ctx.translate(width, 0);\r\n             ctx.scale(-1, 1);\r\n             break;\r\n\r\n          case 3:\r\n              ctx.translate(width, height);\r\n              ctx.rotate(180*Math.PI/180);\r\n              break;\r\n\r\n          case 4:\r\n              ctx.translate(0, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 5:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 6:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(90*Math.PI/180);\r\n              ctx.translate(0, -height);\r\n              break;\r\n\r\n          case 7:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.rotate(-90*Math.PI/180);\r\n              ctx.translate(-width, height);\r\n              ctx.scale(1, -1);\r\n              break;\r\n\r\n          case 8:\r\n              canvas.width = height;\r\n              canvas.height = width;\r\n              ctx.translate(0, width);\r\n              ctx.rotate(-90*Math.PI/180);\r\n              break;\r\n        }\r\n        ctx.drawImage(img, 0,0, width, height);\r\n        ctx.restore();\r\n    }\r\n\r\n    /* Private Methods */\r\n    function _create() {\r\n        var self = this,\r\n            contClass = 'croppie-container',\r\n            customViewportClass = self.options.viewport.type ? 'cr-vp-' + self.options.viewport.type : null,\r\n            boundary, img, viewport, overlay, bw, bh;\r\n\r\n        self.options.useCanvas = self.options.enableOrientation || _hasExif.call(self);\r\n        // Properties on class\r\n        self.data = {};\r\n        self.elements = {};\r\n\r\n        boundary = self.elements.boundary = document.createElement('div');\r\n        viewport = self.elements.viewport = document.createElement('div');\r\n        img = self.elements.img = document.createElement('img');\r\n        overlay = self.elements.overlay = document.createElement('div');\r\n\r\n        if (self.options.useCanvas) {\r\n            self.elements.canvas = document.createElement('canvas');\r\n            self.elements.preview = self.elements.canvas;\r\n        }\r\n        else {\r\n            self.elements.preview = self.elements.img;\r\n        }\r\n\r\n        addClass(boundary, 'cr-boundary');\r\n        boundary.setAttribute('aria-dropeffect', 'none');\r\n        bw = self.options.boundary.width;\r\n        bh = self.options.boundary.height;\r\n        css(boundary, {\r\n            width: (bw + (isNaN(bw) ? '' : 'px')),\r\n            height: (bh + (isNaN(bh) ? '' : 'px'))\r\n        });\r\n\r\n        addClass(viewport, 'cr-viewport');\r\n        if (customViewportClass) {\r\n            addClass(viewport, customViewportClass);\r\n        }\r\n        css(viewport, {\r\n            width: self.options.viewport.width + 'px',\r\n            height: self.options.viewport.height + 'px'\r\n        });\r\n        viewport.setAttribute('tabindex', 0);\r\n\r\n        addClass(self.elements.preview, 'cr-image');\r\n        setAttributes(self.elements.preview, { 'alt': 'preview', 'aria-grabbed': 'false' });\r\n        addClass(overlay, 'cr-overlay');\r\n\r\n        self.element.appendChild(boundary);\r\n        boundary.appendChild(self.elements.preview);\r\n        boundary.appendChild(viewport);\r\n        boundary.appendChild(overlay);\r\n\r\n        addClass(self.element, contClass);\r\n        if (self.options.customClass) {\r\n            addClass(self.element, self.options.customClass);\r\n        }\r\n\r\n        _initDraggable.call(this);\r\n\r\n        if (self.options.enableZoom) {\r\n            _initializeZoom.call(self);\r\n        }\r\n\r\n        // if (self.options.enableOrientation) {\r\n        //     _initRotationControls.call(self);\r\n        // }\r\n\r\n        if (self.options.enableResize) {\r\n            _initializeResize.call(self);\r\n        }\r\n    }\r\n\r\n    // function _initRotationControls () {\r\n    //     var self = this,\r\n    //         wrap, btnLeft, btnRight, iLeft, iRight;\r\n\r\n    //     wrap = document.createElement('div');\r\n    //     self.elements.orientationBtnLeft = btnLeft = document.createElement('button');\r\n    //     self.elements.orientationBtnRight = btnRight = document.createElement('button');\r\n\r\n    //     wrap.appendChild(btnLeft);\r\n    //     wrap.appendChild(btnRight);\r\n\r\n    //     iLeft = document.createElement('i');\r\n    //     iRight = document.createElement('i');\r\n    //     btnLeft.appendChild(iLeft);\r\n    //     btnRight.appendChild(iRight);\r\n\r\n    //     addClass(wrap, 'cr-rotate-controls');\r\n    //     addClass(btnLeft, 'cr-rotate-l');\r\n    //     addClass(btnRight, 'cr-rotate-r');\r\n\r\n    //     self.elements.boundary.appendChild(wrap);\r\n\r\n    //     btnLeft.addEventListener('click', function () {\r\n    //         self.rotate(-90);\r\n    //     });\r\n    //     btnRight.addEventListener('click', function () {\r\n    //         self.rotate(90);\r\n    //     });\r\n    // }\r\n\r\n    function _hasExif() {\r\n        return this.options.enableExif && window.EXIF;\r\n    }\r\n\r\n    function _initializeResize () {\r\n        var self = this;\r\n        var wrap = document.createElement('div');\r\n        var isDragging = false;\r\n        var direction;\r\n        var originalX;\r\n        var originalY;\r\n        var minSize = 50;\r\n        var maxWidth;\r\n        var maxHeight;\r\n        var vr;\r\n        var hr;\r\n\r\n        addClass(wrap, 'cr-resizer');\r\n        css(wrap, {\r\n            width: this.options.viewport.width + 'px',\r\n            height: this.options.viewport.height + 'px'\r\n        });\r\n\r\n        if (this.options.resizeControls.height) {\r\n            vr = document.createElement('div');\r\n            addClass(vr, 'cr-resizer-vertical');\r\n            wrap.appendChild(vr);\r\n        }\r\n\r\n        if (this.options.resizeControls.width) {\r\n            hr = document.createElement('div');\r\n            addClass(hr, 'cr-resizer-horisontal');\r\n            wrap.appendChild(hr);\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) {\r\n                return;\r\n            }\r\n\r\n            var overlayRect = self.elements.overlay.getBoundingClientRect();\r\n\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n            direction = ev.currentTarget.className.indexOf('vertical') !== -1 ? 'v' : 'h';\r\n            maxWidth = overlayRect.width;\r\n            maxHeight = overlayRect.height;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            var pageX = ev.pageX;\r\n            var pageY = ev.pageY;\r\n\r\n            ev.preventDefault();\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX;\r\n            var deltaY = pageY - originalY;\r\n            var newHeight = self.options.viewport.height + deltaY;\r\n            var newWidth = self.options.viewport.width + deltaX;\r\n\r\n            if (direction === 'v' && newHeight >= minSize && newHeight <= maxHeight) {\r\n                css(wrap, {\r\n                    height: newHeight + 'px'\r\n                });\r\n\r\n                self.options.boundary.height += deltaY;\r\n                css(self.elements.boundary, {\r\n                    height: self.options.boundary.height + 'px'\r\n                });\r\n\r\n                self.options.viewport.height += deltaY;\r\n                css(self.elements.viewport, {\r\n                    height: self.options.viewport.height + 'px'\r\n                });\r\n            }\r\n            else if (direction === 'h' && newWidth >= minSize && newWidth <= maxWidth) {\r\n                css(wrap, {\r\n                    width: newWidth + 'px'\r\n                });\r\n\r\n                self.options.boundary.width += deltaX;\r\n                css(self.elements.boundary, {\r\n                    width: self.options.boundary.width + 'px'\r\n                });\r\n\r\n                self.options.viewport.width += deltaX;\r\n                css(self.elements.viewport, {\r\n                    width: self.options.viewport.width + 'px'\r\n                });\r\n            }\r\n\r\n            _updateOverlay.call(self);\r\n            _updateZoomLimits.call(self);\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n        }\r\n\r\n        if (vr) {\r\n            vr.addEventListener('mousedown', mouseDown);\r\n        }\r\n\r\n        if (hr) {\r\n            hr.addEventListener('mousedown', mouseDown);\r\n        }\r\n\r\n        this.elements.boundary.appendChild(wrap);\r\n    }\r\n\r\n    function _setZoomerVal(v) {\r\n        if (this.options.enableZoom) {\r\n            var z = this.elements.zoomer,\r\n                val = fix(v, 4);\r\n\r\n            z.value = Math.max(z.min, Math.min(z.max, val));\r\n        }\r\n    }\r\n\r\n    function _initializeZoom() {\r\n        var self = this,\r\n            wrap = self.elements.zoomerWrap = document.createElement('div'),\r\n            zoomer = self.elements.zoomer = document.createElement('input');\r\n\r\n        addClass(wrap, 'cr-slider-wrap');\r\n        addClass(zoomer, 'cr-slider');\r\n        zoomer.type = 'range';\r\n        zoomer.step = '0.0001';\r\n        zoomer.value = 1;\r\n        zoomer.style.display = self.options.showZoomer ? '' : 'none';\r\n        zoomer.setAttribute('aria-label', 'zoom');\r\n\r\n        self.element.appendChild(wrap);\r\n        wrap.appendChild(zoomer);\r\n\r\n        self._currentZoom = 1;\r\n\r\n        function change() {\r\n            _onZoom.call(self, {\r\n                value: parseFloat(zoomer.value),\r\n                origin: new TransformOrigin(self.elements.preview),\r\n                viewportRect: self.elements.viewport.getBoundingClientRect(),\r\n                transform: Transform.parse(self.elements.preview)\r\n            });\r\n        }\r\n\r\n        function scroll(ev) {\r\n            var delta, targetZoom;\r\n\r\n            if (ev.wheelDelta) {\r\n                delta = ev.wheelDelta / 1200; //wheelDelta min: -120 max: 120 // max x 10 x 2\r\n            } else if (ev.deltaY) {\r\n                delta = ev.deltaY / 1060; //deltaY min: -53 max: 53 // max x 10 x 2\r\n            } else if (ev.detail) {\r\n                delta = ev.detail / -60; //delta min: -3 max: 3 // max x 10 x 2\r\n            } else {\r\n                delta = 0;\r\n            }\r\n\r\n            targetZoom = self._currentZoom + (delta * self._currentZoom);\r\n\r\n            ev.preventDefault();\r\n            _setZoomerVal.call(self, targetZoom);\r\n            change.call(self);\r\n        }\r\n\r\n        self.elements.zoomer.addEventListener('input', change);// this is being fired twice on keypress\r\n        self.elements.zoomer.addEventListener('change', change);\r\n\r\n        if (self.options.mouseWheelZoom) {\r\n            self.elements.boundary.addEventListener('mousewheel', scroll);\r\n            self.elements.boundary.addEventListener('DOMMouseScroll', scroll);\r\n        }\r\n    }\r\n\r\n    function _onZoom(ui) {\r\n        var self = this,\r\n            transform = ui ? ui.transform : Transform.parse(self.elements.preview),\r\n            vpRect = ui ? ui.viewportRect : self.elements.viewport.getBoundingClientRect(),\r\n            origin = ui ? ui.origin : new TransformOrigin(self.elements.preview);\r\n\r\n        function applyCss() {\r\n            var transCss = {};\r\n            transCss[CSS_TRANSFORM] = transform.toString();\r\n            transCss[CSS_TRANS_ORG] = origin.toString();\r\n            css(self.elements.preview, transCss);\r\n        }\r\n\r\n        self._currentZoom = ui ? ui.value : self._currentZoom;\r\n        transform.scale = self._currentZoom;\r\n        self.elements.zoomer.setAttribute('aria-valuenow', self._currentZoom);\r\n        applyCss();\r\n\r\n        if (self.options.enforceBoundary) {\r\n            var boundaries = _getVirtualBoundaries.call(self, vpRect),\r\n                transBoundaries = boundaries.translate,\r\n                oBoundaries = boundaries.origin;\r\n\r\n            if (transform.x >= transBoundaries.maxX) {\r\n                origin.x = oBoundaries.minX;\r\n                transform.x = transBoundaries.maxX;\r\n            }\r\n\r\n            if (transform.x <= transBoundaries.minX) {\r\n                origin.x = oBoundaries.maxX;\r\n                transform.x = transBoundaries.minX;\r\n            }\r\n\r\n            if (transform.y >= transBoundaries.maxY) {\r\n                origin.y = oBoundaries.minY;\r\n                transform.y = transBoundaries.maxY;\r\n            }\r\n\r\n            if (transform.y <= transBoundaries.minY) {\r\n                origin.y = oBoundaries.maxY;\r\n                transform.y = transBoundaries.minY;\r\n            }\r\n        }\r\n        applyCss();\r\n        _debouncedOverlay.call(self);\r\n        _triggerUpdate.call(self);\r\n    }\r\n\r\n    function _getVirtualBoundaries(viewport) {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            vpWidth = viewport.width,\r\n            vpHeight = viewport.height,\r\n            centerFromBoundaryX = self.elements.boundary.clientWidth / 2,\r\n            centerFromBoundaryY = self.elements.boundary.clientHeight / 2,\r\n            imgRect = self.elements.preview.getBoundingClientRect(),\r\n            curImgWidth = imgRect.width,\r\n            curImgHeight = imgRect.height,\r\n            halfWidth = vpWidth / 2,\r\n            halfHeight = vpHeight / 2;\r\n\r\n        var maxX = ((halfWidth / scale) - centerFromBoundaryX) * -1;\r\n        var minX = maxX - ((curImgWidth * (1 / scale)) - (vpWidth * (1 / scale)));\r\n\r\n        var maxY = ((halfHeight / scale) - centerFromBoundaryY) * -1;\r\n        var minY = maxY - ((curImgHeight * (1 / scale)) - (vpHeight * (1 / scale)));\r\n\r\n        var originMinX = (1 / scale) * halfWidth;\r\n        var originMaxX = (curImgWidth * (1 / scale)) - originMinX;\r\n\r\n        var originMinY = (1 / scale) * halfHeight;\r\n        var originMaxY = (curImgHeight * (1 / scale)) - originMinY;\r\n\r\n        return {\r\n            translate: {\r\n                maxX: maxX,\r\n                minX: minX,\r\n                maxY: maxY,\r\n                minY: minY\r\n            },\r\n            origin: {\r\n                maxX: originMaxX,\r\n                minX: originMinX,\r\n                maxY: originMaxY,\r\n                minY: originMinY\r\n            }\r\n        };\r\n    }\r\n\r\n    function _updateCenterPoint() {\r\n        var self = this,\r\n            scale = self._currentZoom,\r\n            data = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            transform = Transform.parse(self.elements.preview.style[CSS_TRANSFORM]),\r\n            pc = new TransformOrigin(self.elements.preview),\r\n            top = (vpData.top - data.top) + (vpData.height / 2),\r\n            left = (vpData.left - data.left) + (vpData.width / 2),\r\n            center = {},\r\n            adj = {};\r\n\r\n        center.y = top / scale;\r\n        center.x = left / scale;\r\n\r\n        adj.y = (center.y - pc.y) * (1 - scale);\r\n        adj.x = (center.x - pc.x) * (1 - scale);\r\n\r\n        transform.x -= adj.x;\r\n        transform.y -= adj.y;\r\n\r\n        var newCss = {};\r\n        newCss[CSS_TRANS_ORG] = center.x + 'px ' + center.y + 'px';\r\n        newCss[CSS_TRANSFORM] = transform.toString();\r\n        css(self.elements.preview, newCss);\r\n    }\r\n\r\n    function _initDraggable() {\r\n        var self = this,\r\n            isDragging = false,\r\n            originalX,\r\n            originalY,\r\n            originalDistance,\r\n            vpRect,\r\n            transform;\r\n\r\n        function assignTransformCoordinates(deltaX, deltaY) {\r\n            var imgRect = self.elements.preview.getBoundingClientRect(),\r\n                top = transform.y + deltaY,\r\n                left = transform.x + deltaX;\r\n\r\n            if (self.options.enforceBoundary) {\r\n                if (vpRect.top > imgRect.top + deltaY && vpRect.bottom < imgRect.bottom + deltaY) {\r\n                    transform.y = top;\r\n                }\r\n\r\n                if (vpRect.left > imgRect.left + deltaX && vpRect.right < imgRect.right + deltaX) {\r\n                    transform.x = left;\r\n                }\r\n            }\r\n            else {\r\n                transform.y = top;\r\n                transform.x = left;\r\n            }\r\n        }\r\n\r\n        function toggleGrabState(isDragging) {\r\n          self.elements.preview.setAttribute('aria-grabbed', isDragging);\r\n          self.elements.boundary.setAttribute('aria-dropeffect', isDragging? 'move': 'none');\r\n        }\r\n\r\n        function keyDown(ev) {\r\n            var LEFT_ARROW  = 37,\r\n                UP_ARROW    = 38,\r\n                RIGHT_ARROW = 39,\r\n                DOWN_ARROW  = 40;\r\n\r\n            if (ev.shiftKey && (ev.keyCode == UP_ARROW || ev.keyCode == DOWN_ARROW)) {\r\n                var zoom = 0.0;\r\n                if (ev.keyCode == UP_ARROW) {\r\n                    zoom = parseFloat(self.elements.zoomer.value, 10) + parseFloat(self.elements.zoomer.step, 10)\r\n                }\r\n                else {\r\n                    zoom = parseFloat(self.elements.zoomer.value, 10) - parseFloat(self.elements.zoomer.step, 10)\r\n                }\r\n                self.setZoom(zoom);\r\n            }\r\n            else if (self.options.enableKeyMovement && (ev.keyCode >= 37 && ev.keyCode <= 40)) {\r\n                ev.preventDefault();\r\n                var movement = parseKeyDown(ev.keyCode);\r\n\r\n                transform = Transform.parse(self.elements.preview);\r\n                document.body.style[CSS_USERSELECT] = 'none';\r\n                vpRect = self.elements.viewport.getBoundingClientRect();\r\n                keyMove(movement);\r\n            };\r\n\r\n            function parseKeyDown(key) {\r\n                switch (key) {\r\n                    case LEFT_ARROW:\r\n                        return [1, 0];\r\n                    case UP_ARROW:\r\n                        return [0, 1];\r\n                    case RIGHT_ARROW:\r\n                        return [-1, 0];\r\n                    case DOWN_ARROW:\r\n                        return [0, -1];\r\n                };\r\n            };\r\n        }\r\n\r\n        function keyMove(movement) {\r\n            var deltaX = movement[0],\r\n                deltaY = movement[1],\r\n                newCss = {};\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        function mouseDown(ev) {\r\n            if (ev.button !== undefined && ev.button !== 0) return;\r\n\r\n            ev.preventDefault();\r\n            if (isDragging) return;\r\n            isDragging = true;\r\n            originalX = ev.pageX;\r\n            originalY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                originalX = touches.pageX;\r\n                originalY = touches.pageY;\r\n            }\r\n            toggleGrabState(isDragging);\r\n            transform = Transform.parse(self.elements.preview);\r\n            window.addEventListener('mousemove', mouseMove);\r\n            window.addEventListener('touchmove', mouseMove);\r\n            window.addEventListener('mouseup', mouseUp);\r\n            window.addEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = 'none';\r\n            vpRect = self.elements.viewport.getBoundingClientRect();\r\n        }\r\n\r\n        function mouseMove(ev) {\r\n            ev.preventDefault();\r\n            var pageX = ev.pageX,\r\n                pageY = ev.pageY;\r\n\r\n            if (ev.touches) {\r\n                var touches = ev.touches[0];\r\n                pageX = touches.pageX;\r\n                pageY = touches.pageY;\r\n            }\r\n\r\n            var deltaX = pageX - originalX,\r\n                deltaY = pageY - originalY,\r\n                newCss = {};\r\n\r\n            if (ev.type == 'touchmove') {\r\n                if (ev.touches.length > 1) {\r\n                    var touch1 = ev.touches[0];\r\n                    var touch2 = ev.touches[1];\r\n                    var dist = Math.sqrt((touch1.pageX - touch2.pageX) * (touch1.pageX - touch2.pageX) + (touch1.pageY - touch2.pageY) * (touch1.pageY - touch2.pageY));\r\n\r\n                    if (!originalDistance) {\r\n                        originalDistance = dist / self._currentZoom;\r\n                    }\r\n\r\n                    var scale = dist / originalDistance;\r\n\r\n                    _setZoomerVal.call(self, scale);\r\n                    dispatchChange(self.elements.zoomer);\r\n                    return;\r\n                }\r\n            }\r\n\r\n            assignTransformCoordinates(deltaX, deltaY);\r\n\r\n            newCss[CSS_TRANSFORM] = transform.toString();\r\n            css(self.elements.preview, newCss);\r\n            _updateOverlay.call(self);\r\n            originalY = pageY;\r\n            originalX = pageX;\r\n        }\r\n\r\n        function mouseUp() {\r\n            isDragging = false;\r\n            toggleGrabState(isDragging);\r\n            window.removeEventListener('mousemove', mouseMove);\r\n            window.removeEventListener('touchmove', mouseMove);\r\n            window.removeEventListener('mouseup', mouseUp);\r\n            window.removeEventListener('touchend', mouseUp);\r\n            document.body.style[CSS_USERSELECT] = '';\r\n            _updateCenterPoint.call(self);\r\n            _triggerUpdate.call(self);\r\n            originalDistance = 0;\r\n        }\r\n\r\n        self.elements.overlay.addEventListener('mousedown', mouseDown);\r\n        self.elements.viewport.addEventListener('keydown', keyDown);\r\n        self.elements.overlay.addEventListener('touchstart', mouseDown);\r\n    }\r\n\r\n    function _updateOverlay() {\r\n        var self = this,\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect();\r\n\r\n        css(self.elements.overlay, {\r\n            width: imgData.width + 'px',\r\n            height: imgData.height + 'px',\r\n            top: (imgData.top - boundRect.top) + 'px',\r\n            left: (imgData.left - boundRect.left) + 'px'\r\n        });\r\n    }\r\n    var _debouncedOverlay = debounce(_updateOverlay, 500);\r\n\r\n    function _triggerUpdate() {\r\n        var self = this,\r\n            data = self.get(),\r\n            ev;\r\n\r\n        if (!_isVisible.call(self)) {\r\n            return;\r\n        }\r\n\r\n        self.options.update.call(self, data);\r\n        if (self.$ && typeof Prototype == 'undefined') {\r\n            self.$(self.element).trigger('update', data);\r\n        }\r\n        else {\r\n            var ev;\r\n            if (window.CustomEvent) {\r\n                ev = new CustomEvent('update', { detail: data });\r\n            } else {\r\n                ev = document.createEvent('CustomEvent');\r\n                ev.initCustomEvent('update', true, true, data);\r\n            }\r\n\r\n            self.element.dispatchEvent(ev);\r\n        }\r\n    }\r\n\r\n    function _isVisible() {\r\n        return this.elements.preview.offsetHeight > 0 && this.elements.preview.offsetWidth > 0;\r\n    }\r\n\r\n    function _updatePropertiesFromImage() {\r\n        var self = this,\r\n            initialZoom = 1,\r\n            cssReset = {},\r\n            img = self.elements.preview,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            transformReset = new Transform(0, 0, initialZoom),\r\n            originReset = new TransformOrigin(),\r\n            isVisible = _isVisible.call(self);\r\n\r\n        if (!isVisible || self.data.bound) {\r\n            // if the croppie isn't visible or it doesn't need binding\r\n            return;\r\n        }\r\n\r\n        self.data.bound = true;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        cssReset[CSS_TRANS_ORG] = originReset.toString();\r\n        cssReset['opacity'] = 1;\r\n        css(img, cssReset);\r\n\r\n        self._originalImageWidth = imgData.width;\r\n        self._originalImageHeight = imgData.height;\r\n\r\n        if (self.options.enableZoom) {\r\n            _updateZoomLimits.call(self, true);\r\n        }\r\n        else {\r\n            self._currentZoom = initialZoom;\r\n        }\r\n\r\n        transformReset.scale = self._currentZoom;\r\n        cssReset[CSS_TRANSFORM] = transformReset.toString();\r\n        css(img, cssReset);\r\n\r\n        if (self.data.points.length) {\r\n            _bindPoints.call(self, self.data.points);\r\n        }\r\n        else {\r\n            _centerImage.call(self);\r\n        }\r\n\r\n        _updateCenterPoint.call(self);\r\n        _updateOverlay.call(self);\r\n    }\r\n\r\n    function _updateZoomLimits (initial) {\r\n        var self = this,\r\n            minZoom = 0,\r\n            maxZoom = 1.5,\r\n            initialZoom,\r\n            defaultInitialZoom,\r\n            zoomer = self.elements.zoomer,\r\n            scale = parseFloat(zoomer.value),\r\n            boundaryData = self.elements.boundary.getBoundingClientRect(),\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            minW,\r\n            minH;\r\n\r\n        if (self.options.enforceBoundary) {\r\n            minW = vpData.width / (initial ? imgData.width : imgData.width / scale);\r\n            minH = vpData.height / (initial ? imgData.height : imgData.height / scale);\r\n            minZoom = Math.max(minW, minH);\r\n        }\r\n\r\n        if (minZoom >= maxZoom) {\r\n            maxZoom = minZoom + 1;\r\n        }\r\n\r\n        zoomer.min = fix(minZoom, 4);\r\n        zoomer.max = fix(maxZoom, 4);\r\n\r\n        if (initial) {\r\n            defaultInitialZoom = Math.max((boundaryData.width / imgData.width), (boundaryData.height / imgData.height));\r\n            initialZoom = self.data.boundZoom !== null ? self.data.boundZoom : defaultInitialZoom;\r\n            _setZoomerVal.call(self, initialZoom);\r\n        }\r\n\r\n        dispatchChange(zoomer);\r\n    }\r\n\r\n    function _bindPoints(points) {\r\n        if (points.length != 4) {\r\n            throw \"Croppie - Invalid number of points supplied: \" + points;\r\n        }\r\n        var self = this,\r\n            pointsWidth = points[2] - points[0],\r\n            // pointsHeight = points[3] - points[1],\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            boundRect = self.elements.boundary.getBoundingClientRect(),\r\n            vpOffset = {\r\n                left: vpData.left - boundRect.left,\r\n                top: vpData.top - boundRect.top\r\n            },\r\n            scale = vpData.width / pointsWidth,\r\n            originTop = points[1],\r\n            originLeft = points[0],\r\n            transformTop = (-1 * points[1]) + vpOffset.top,\r\n            transformLeft = (-1 * points[0]) + vpOffset.left,\r\n            newCss = {};\r\n\r\n        newCss[CSS_TRANS_ORG] = originLeft + 'px ' + originTop + 'px';\r\n        newCss[CSS_TRANSFORM] = new Transform(transformLeft, transformTop, scale).toString();\r\n        css(self.elements.preview, newCss);\r\n\r\n        _setZoomerVal.call(self, scale);\r\n        self._currentZoom = scale;\r\n    }\r\n\r\n    function _centerImage() {\r\n        var self = this,\r\n            imgDim = self.elements.preview.getBoundingClientRect(),\r\n            vpDim = self.elements.viewport.getBoundingClientRect(),\r\n            boundDim = self.elements.boundary.getBoundingClientRect(),\r\n            vpLeft = vpDim.left - boundDim.left,\r\n            vpTop = vpDim.top - boundDim.top,\r\n            w = vpLeft - ((imgDim.width - vpDim.width) / 2),\r\n            h = vpTop - ((imgDim.height - vpDim.height) / 2),\r\n            transform = new Transform(w, h, self._currentZoom);\r\n\r\n        css(self.elements.preview, CSS_TRANSFORM, transform.toString());\r\n    }\r\n\r\n    function _transferImageToCanvas(customOrientation) {\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            img = self.elements.img,\r\n            ctx = canvas.getContext('2d'),\r\n            exif = _hasExif.call(self),\r\n            customOrientation = self.options.enableOrientation && customOrientation;\r\n\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n\r\n        if (exif && !customOrientation) {\r\n            var orientation = getExifOrientation(img);\r\n            drawCanvas(canvas, img, num(orientation || 0, 10));\r\n        }\r\n        else if (customOrientation) {\r\n            drawCanvas(canvas, img, customOrientation);\r\n        }\r\n    }\r\n\r\n    function _getCanvas(data) {\r\n        var self = this,\r\n            points = data.points,\r\n            left = num(points[0]),\r\n            top = num(points[1]),\r\n            right = num(points[2]),\r\n            bottom = num(points[3]),\r\n            width = right-left,\r\n            height = bottom-top,\r\n            circle = data.circle,\r\n            canvas = document.createElement('canvas'),\r\n            ctx = canvas.getContext('2d'),\r\n            outWidth = width,\r\n            outHeight = height,\r\n            startX = 0,\r\n            startY = 0,\r\n            canvasWidth = outWidth,\r\n            canvasHeight = outHeight,\r\n            customDimensions = (data.outputWidth && data.outputHeight),\r\n            outputRatio = 1;\r\n\r\n        if (customDimensions) {\r\n            canvasWidth = data.outputWidth;\r\n            canvasHeight = data.outputHeight;\r\n            outputRatio = canvasWidth / outWidth;\r\n        }\r\n\r\n        canvas.width = canvasWidth;\r\n        canvas.height = canvasHeight;\r\n\r\n        if (data.backgroundColor) {\r\n            ctx.fillStyle = data.backgroundColor;\r\n            ctx.fillRect(0, 0, outWidth, outHeight);\r\n        }\r\n\r\n        // start fixing data to send to draw image for enforceBoundary: false\r\n        if (!self.options.enforceBoundary) {\r\n            if (left < 0) {\r\n                startX = Math.abs(left);\r\n                left = 0;\r\n            }\r\n            if (top < 0) {\r\n                startY = Math.abs(top);\r\n                top = 0;\r\n            }\r\n            if (right > self._originalImageWidth) {\r\n                width = self._originalImageWidth - left;\r\n                outWidth = width;\r\n            }\r\n            if (bottom > self._originalImageHeight) {\r\n                height = self._originalImageHeight - top;\r\n                outHeight = height;\r\n            }\r\n        }\r\n\r\n        if (outputRatio !== 1) {\r\n            startX *= outputRatio;\r\n            startY *= outputRatio;\r\n            outWidth *= outputRatio;\r\n            outHeight *= outputRatio;\r\n        }\r\n\r\n        ctx.drawImage(this.elements.preview, left, top, Math.min(width, self._originalImageWidth), Math.min(height, self._originalImageHeight), startX, startY, outWidth, outHeight);\r\n        if (circle) {\r\n            ctx.fillStyle = '#fff';\r\n            ctx.globalCompositeOperation = 'destination-in';\r\n            ctx.beginPath();\r\n            ctx.arc(outWidth / 2, outHeight / 2, outWidth / 2, 0, Math.PI * 2, true);\r\n            ctx.closePath();\r\n            ctx.fill();\r\n        }\r\n        return canvas;\r\n    }\r\n\r\n    function _getHtmlResult(data) {\r\n        var points = data.points,\r\n            div = document.createElement('div'),\r\n            img = document.createElement('img'),\r\n            width = points[2] - points[0],\r\n            height = points[3] - points[1];\r\n\r\n        addClass(div, 'croppie-result');\r\n        div.appendChild(img);\r\n        css(img, {\r\n            left: (-1 * points[0]) + 'px',\r\n            top: (-1 * points[1]) + 'px'\r\n        });\r\n        img.src = data.url;\r\n        css(div, {\r\n            width: width + 'px',\r\n            height: height + 'px'\r\n        });\r\n\r\n        return div;\r\n    }\r\n\r\n    function _getBase64Result(data) {\r\n        return _getCanvas.call(this, data).toDataURL(data.format, data.quality);\r\n    }\r\n\r\n    function _getBlobResult(data) {\r\n        var self = this;\r\n        return new Promise(function (resolve, reject) {\r\n            _getCanvas.call(self, data).toBlob(function (blob) {\r\n                resolve(blob);\r\n            }, data.format, data.quality);\r\n        });\r\n    }\r\n\r\n    function _bind(options, cb) {\r\n        var self = this,\r\n            url,\r\n            points = [],\r\n            zoom = null,\r\n            hasExif = _hasExif.call(self);;\r\n\r\n        if (typeof (options) === 'string') {\r\n            url = options;\r\n            options = {};\r\n        }\r\n        else if (Array.isArray(options)) {\r\n            points = options.slice();\r\n        }\r\n        else if (typeof (options) == 'undefined' && self.data.url) { //refreshing\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            return null;\r\n        }\r\n        else {\r\n            url = options.url;\r\n            points = options.points || [];\r\n            zoom = typeof(options.zoom) === 'undefined' ? null : options.zoom;\r\n        }\r\n\r\n        self.data.bound = false;\r\n        self.data.url = url || self.data.url;\r\n        self.data.boundZoom = zoom;\r\n\r\n        return loadImage(url, self.elements.img, hasExif).then(function (img) {\r\n            if (!points.length) {\r\n                var natDim = naturalImageDimensions(img);\r\n                var rect = self.elements.viewport.getBoundingClientRect();\r\n                var aspectRatio = rect.width / rect.height;\r\n                var imgAspectRatio = natDim.width / natDim.height;\r\n                var width, height;\r\n\r\n                if (imgAspectRatio > aspectRatio) {\r\n                    height = natDim.height;\r\n                    width = height * aspectRatio;\r\n                }\r\n                else {\r\n                    width = natDim.width;\r\n                    height = width / aspectRatio;\r\n                }\r\n\r\n                var x0 = (natDim.width - width) / 2;\r\n                var y0 = (natDim.height - height) / 2;\r\n                var x1 = x0 + width;\r\n                var y1 = y0 + height;\r\n\r\n                self.data.points = [x0, y0, x1, y1];\r\n            }\r\n            else if (self.options.relative) {\r\n                points = [\r\n                    points[0] * img.naturalWidth / 100,\r\n                    points[1] * img.naturalHeight / 100,\r\n                    points[2] * img.naturalWidth / 100,\r\n                    points[3] * img.naturalHeight / 100\r\n                ];\r\n            }\r\n\r\n            self.data.points = points.map(function (p) {\r\n                return parseFloat(p);\r\n            });\r\n            if (self.options.useCanvas) {\r\n                _transferImageToCanvas.call(self, options.orientation || 1);\r\n            }\r\n            _updatePropertiesFromImage.call(self);\r\n            _triggerUpdate.call(self);\r\n            cb && cb();\r\n        });\r\n    }\r\n\r\n    function fix(v, decimalPoints) {\r\n        return parseFloat(v).toFixed(decimalPoints || 0);\r\n    }\r\n\r\n    function _get() {\r\n        var self = this,\r\n            imgData = self.elements.preview.getBoundingClientRect(),\r\n            vpData = self.elements.viewport.getBoundingClientRect(),\r\n            x1 = vpData.left - imgData.left,\r\n            y1 = vpData.top - imgData.top,\r\n            widthDiff = (vpData.width - self.elements.viewport.offsetWidth) / 2, //border\r\n            heightDiff = (vpData.height - self.elements.viewport.offsetHeight) / 2,\r\n            x2 = x1 + self.elements.viewport.offsetWidth + widthDiff,\r\n            y2 = y1 + self.elements.viewport.offsetHeight + heightDiff,\r\n            scale = self._currentZoom;\r\n\r\n        if (scale === Infinity || isNaN(scale)) {\r\n            scale = 1;\r\n        }\r\n\r\n        var max = self.options.enforceBoundary ? 0 : Number.NEGATIVE_INFINITY;\r\n        x1 = Math.max(max, x1 / scale);\r\n        y1 = Math.max(max, y1 / scale);\r\n        x2 = Math.max(max, x2 / scale);\r\n        y2 = Math.max(max, y2 / scale);\r\n\r\n        return {\r\n            points: [fix(x1), fix(y1), fix(x2), fix(y2)],\r\n            zoom: scale\r\n        };\r\n    }\r\n\r\n    var RESULT_DEFAULTS = {\r\n            type: 'canvas',\r\n            format: 'png',\r\n            quality: 1\r\n        },\r\n        RESULT_FORMATS = ['jpeg', 'webp', 'png'];\r\n\r\n    function _result(options) {\r\n        var self = this,\r\n            data = _get.call(self),\r\n            opts = deepExtend(RESULT_DEFAULTS, deepExtend({}, options)),\r\n            resultType = (typeof (options) === 'string' ? options : (opts.type || 'base64')),\r\n            size = opts.size || 'viewport',\r\n            format = opts.format,\r\n            quality = opts.quality,\r\n            backgroundColor = opts.backgroundColor,\r\n            circle = typeof opts.circle === 'boolean' ? opts.circle : (self.options.viewport.type === 'circle'),\r\n            vpRect = self.elements.viewport.getBoundingClientRect(),\r\n            ratio = vpRect.width / vpRect.height,\r\n            prom;\r\n\r\n        if (size === 'viewport') {\r\n            data.outputWidth = vpRect.width;\r\n            data.outputHeight = vpRect.height;\r\n        } else if (typeof size === 'object') {\r\n            if (size.width && size.height) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.height;\r\n            } else if (size.width) {\r\n                data.outputWidth = size.width;\r\n                data.outputHeight = size.width / ratio;\r\n            } else if (size.height) {\r\n                data.outputWidth = size.height * ratio;\r\n                data.outputHeight = size.height;\r\n            }\r\n        }\r\n\r\n        if (RESULT_FORMATS.indexOf(format) > -1) {\r\n            data.format = 'image/' + format;\r\n            data.quality = quality;\r\n        }\r\n\r\n        data.circle = circle;\r\n        data.url = self.data.url;\r\n        data.backgroundColor = backgroundColor;\r\n\r\n        prom = new Promise(function (resolve, reject) {\r\n            switch(resultType.toLowerCase())\r\n            {\r\n                case 'rawcanvas':\r\n                    resolve(_getCanvas.call(self, data));\r\n                    break;\r\n                case 'canvas':\r\n                case 'base64':\r\n                    resolve(_getBase64Result.call(self, data));\r\n                    break;\r\n                case 'blob':\r\n                    _getBlobResult.call(self, data).then(resolve);\r\n                    break;\r\n                default:\r\n                    resolve(_getHtmlResult.call(self, data));\r\n                    break;\r\n            }\r\n        });\r\n        return prom;\r\n    }\r\n\r\n    function _refresh() {\r\n        _updatePropertiesFromImage.call(this);\r\n    }\r\n\r\n    function _rotate(deg) {\r\n        if (!this.options.useCanvas) {\r\n            throw 'Croppie: Cannot rotate without enableOrientation';\r\n        }\r\n\r\n        var self = this,\r\n            canvas = self.elements.canvas,\r\n            copy = document.createElement('canvas'),\r\n            ornt = 1;\r\n\r\n        copy.width = canvas.width;\r\n        copy.height = canvas.height;\r\n        var ctx = copy.getContext('2d');\r\n        ctx.drawImage(canvas, 0, 0);\r\n\r\n        if (deg === 90 || deg === -270) ornt = 6;\r\n        if (deg === -90 || deg === 270) ornt = 8;\r\n        if (deg === 180 || deg === -180) ornt = 3;\r\n\r\n        drawCanvas(canvas, copy, ornt);\r\n        _onZoom.call(self);\r\n        copy = null;\r\n    }\r\n\r\n    function _destroy() {\r\n        var self = this;\r\n        self.element.removeChild(self.elements.boundary);\r\n        removeClass(self.element, 'croppie-container');\r\n        if (self.options.enableZoom) {\r\n            self.element.removeChild(self.elements.zoomerWrap);\r\n        }\r\n        delete self.elements;\r\n    }\r\n\r\n    if (window.jQuery) {\r\n        var $ = window.jQuery;\r\n        $.fn.croppie = function (opts) {\r\n            var ot = typeof opts;\r\n\r\n            if (ot === 'string') {\r\n                var args = Array.prototype.slice.call(arguments, 1);\r\n                var singleInst = $(this).data('croppie');\r\n\r\n                if (opts === 'get') {\r\n                    return singleInst.get();\r\n                }\r\n                else if (opts === 'result') {\r\n                    return singleInst.result.apply(singleInst, args);\r\n                }\r\n                else if (opts === 'bind') {\r\n                    return singleInst.bind.apply(singleInst, args);\r\n                }\r\n\r\n                return this.each(function () {\r\n                    var i = $(this).data('croppie');\r\n                    if (!i) return;\r\n\r\n                    var method = i[opts];\r\n                    if ($.isFunction(method)) {\r\n                        method.apply(i, args);\r\n                        if (opts === 'destroy') {\r\n                            $(this).removeData('croppie');\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw 'Croppie ' + opts + ' method not found';\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                return this.each(function () {\r\n                    var i = new Croppie(this, opts);\r\n                    i.$ = $;\r\n                    $(this).data('croppie', i);\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function Croppie(element, opts) {\r\n        this.element = element;\r\n        this.options = deepExtend(deepExtend({}, Croppie.defaults), opts);\r\n\r\n        if (this.element.tagName.toLowerCase() === 'img') {\r\n            var origImage = this.element;\r\n            addClass(origImage, 'cr-original-image');\r\n            setAttributes(origImage, {'aria-hidden' : 'true', 'alt' : '' });\r\n            var replacementDiv = document.createElement('div');\r\n            this.element.parentNode.appendChild(replacementDiv);\r\n            replacementDiv.appendChild(origImage);\r\n            this.element = replacementDiv;\r\n            this.options.url = this.options.url || origImage.src;\r\n        }\r\n\r\n        _create.call(this);\r\n        if (this.options.url) {\r\n            var bindOpts = {\r\n                url: this.options.url,\r\n                points: this.options.points\r\n            };\r\n            delete this.options['url'];\r\n            delete this.options['points'];\r\n            _bind.call(this, bindOpts);\r\n        }\r\n    }\r\n\r\n    Croppie.defaults = {\r\n        viewport: {\r\n            width: 100,\r\n            height: 100,\r\n            type: 'square'\r\n        },\r\n        boundary: { },\r\n        orientationControls: {\r\n            enabled: true,\r\n            leftClass: '',\r\n            rightClass: ''\r\n        },\r\n        resizeControls: {\r\n            width: true,\r\n            height: true\r\n        },\r\n        customClass: '',\r\n        showZoomer: true,\r\n        enableZoom: true,\r\n        enableResize: false,\r\n        mouseWheelZoom: true,\r\n        enableExif: false,\r\n        enforceBoundary: true,\r\n        enableOrientation: false,\r\n        enableKeyMovement: true,\r\n        update: function () { }\r\n    };\r\n\r\n    Croppie.globals = {\r\n        translate: 'translate3d'\r\n    };\r\n\r\n    deepExtend(Croppie.prototype, {\r\n        bind: function (options, cb) {\r\n            return _bind.call(this, options, cb);\r\n        },\r\n        get: function () {\r\n            var data = _get.call(this);\r\n            var points = data.points;\r\n            if (this.options.relative) {\r\n                points[0] /= this.elements.img.naturalWidth / 100;\r\n                points[1] /= this.elements.img.naturalHeight / 100;\r\n                points[2] /= this.elements.img.naturalWidth / 100;\r\n                points[3] /= this.elements.img.naturalHeight / 100;\r\n            }\r\n            return data;\r\n        },\r\n        result: function (type) {\r\n            return _result.call(this, type);\r\n        },\r\n        refresh: function () {\r\n            return _refresh.call(this);\r\n        },\r\n        setZoom: function (v) {\r\n            _setZoomerVal.call(this, v);\r\n            dispatchChange(this.elements.zoomer);\r\n        },\r\n        rotate: function (deg) {\r\n            _rotate.call(this, deg);\r\n        },\r\n        destroy: function () {\r\n            return _destroy.call(this);\r\n        }\r\n    });\r\n\r\n    exports.Croppie = window.Croppie = Croppie;\r\n\r\n    if (typeof module === 'object' && !!module.exports) {\r\n        module.exports = Croppie;\r\n    }\r\n}));\r\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../timers-browserify/main.js */ 6).setImmediate))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jcm9wcGllL2Nyb3BwaWUuanM/ZjEwMSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBDcm9wcGllXHJcbiAqIENvcHlyaWdodCAyMDE3XHJcbiAqIEZvbGlvdGVrXHJcbiAqIFZlcnNpb246IDIuNS4xXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4oZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICAvLyBBTUQuIFJlZ2lzdGVyIGFzIGFuIGFub255bW91cyBtb2R1bGUuXHJcbiAgICAgICAgZGVmaW5lKFsnZXhwb3J0cyddLCBmYWN0b3J5KTtcclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBleHBvcnRzLm5vZGVOYW1lICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vIENvbW1vbkpTXHJcbiAgICAgICAgZmFjdG9yeShleHBvcnRzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQnJvd3NlciBnbG9iYWxzXHJcbiAgICAgICAgZmFjdG9yeSgocm9vdC5jb21tb25Kc1N0cmljdCA9IHt9KSk7XHJcbiAgICB9XHJcbn0odGhpcywgZnVuY3Rpb24gKGV4cG9ydHMpIHtcclxuXHJcbiAgICAvKiBQb2x5ZmlsbHMgKi9cclxuICAgIGlmICh0eXBlb2YgUHJvbWlzZSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIC8qISBwcm9taXNlLXBvbHlmaWxsIDMuMS4wICovXHJcbiAgICAgICAgIWZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxiKXtyZXR1cm4gZnVuY3Rpb24oKXthLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gYyhhKXtpZihcIm9iamVjdFwiIT10eXBlb2YgdGhpcyl0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3XCIpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcIm5vdCBhIGZ1bmN0aW9uXCIpO3RoaXMuX3N0YXRlPW51bGwsdGhpcy5fdmFsdWU9bnVsbCx0aGlzLl9kZWZlcnJlZHM9W10saShhLGIoZSx0aGlzKSxiKGYsdGhpcykpfWZ1bmN0aW9uIGQoYSl7dmFyIGI9dGhpcztyZXR1cm4gbnVsbD09PXRoaXMuX3N0YXRlP3ZvaWQgdGhpcy5fZGVmZXJyZWRzLnB1c2goYSk6dm9pZCBrKGZ1bmN0aW9uKCl7dmFyIGM9Yi5fc3RhdGU/YS5vbkZ1bGZpbGxlZDphLm9uUmVqZWN0ZWQ7aWYobnVsbD09PWMpcmV0dXJuIHZvaWQoYi5fc3RhdGU/YS5yZXNvbHZlOmEucmVqZWN0KShiLl92YWx1ZSk7dmFyIGQ7dHJ5e2Q9YyhiLl92YWx1ZSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgYS5yZWplY3QoZSl9YS5yZXNvbHZlKGQpfSl9ZnVuY3Rpb24gZShhKXt0cnl7aWYoYT09PXRoaXMpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkEgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgd2l0aCBpdHNlbGYuXCIpO2lmKGEmJihcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYSkpe3ZhciBjPWEudGhlbjtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBjKXJldHVybiB2b2lkIGkoYihjLGEpLGIoZSx0aGlzKSxiKGYsdGhpcykpfXRoaXMuX3N0YXRlPSEwLHRoaXMuX3ZhbHVlPWEsZy5jYWxsKHRoaXMpfWNhdGNoKGQpe2YuY2FsbCh0aGlzLGQpfX1mdW5jdGlvbiBmKGEpe3RoaXMuX3N0YXRlPSExLHRoaXMuX3ZhbHVlPWEsZy5jYWxsKHRoaXMpfWZ1bmN0aW9uIGcoKXtmb3IodmFyIGE9MCxiPXRoaXMuX2RlZmVycmVkcy5sZW5ndGg7Yj5hO2ErKylkLmNhbGwodGhpcyx0aGlzLl9kZWZlcnJlZHNbYV0pO3RoaXMuX2RlZmVycmVkcz1udWxsfWZ1bmN0aW9uIGgoYSxiLGMsZCl7dGhpcy5vbkZ1bGZpbGxlZD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhP2E6bnVsbCx0aGlzLm9uUmVqZWN0ZWQ9XCJmdW5jdGlvblwiPT10eXBlb2YgYj9iOm51bGwsdGhpcy5yZXNvbHZlPWMsdGhpcy5yZWplY3Q9ZH1mdW5jdGlvbiBpKGEsYixjKXt2YXIgZD0hMTt0cnl7YShmdW5jdGlvbihhKXtkfHwoZD0hMCxiKGEpKX0sZnVuY3Rpb24oYSl7ZHx8KGQ9ITAsYyhhKSl9KX1jYXRjaChlKXtpZihkKXJldHVybjtkPSEwLGMoZSl9fXZhciBqPXNldFRpbWVvdXQsaz1cImZ1bmN0aW9uXCI9PXR5cGVvZiBzZXRJbW1lZGlhdGUmJnNldEltbWVkaWF0ZXx8ZnVuY3Rpb24oYSl7aihhLDEpfSxsPUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGEpe3JldHVyblwiW29iamVjdCBBcnJheV1cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhKX07Yy5wcm90b3R5cGVbXCJjYXRjaFwiXT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy50aGVuKG51bGwsYSl9LGMucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24oYSxiKXt2YXIgZT10aGlzO3JldHVybiBuZXcgYyhmdW5jdGlvbihjLGYpe2QuY2FsbChlLG5ldyBoKGEsYixjLGYpKX0pfSxjLmFsbD1mdW5jdGlvbigpe3ZhciBhPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKDE9PT1hcmd1bWVudHMubGVuZ3RoJiZsKGFyZ3VtZW50c1swXSk/YXJndW1lbnRzWzBdOmFyZ3VtZW50cyk7cmV0dXJuIG5ldyBjKGZ1bmN0aW9uKGIsYyl7ZnVuY3Rpb24gZChmLGcpe3RyeXtpZihnJiYoXCJvYmplY3RcIj09dHlwZW9mIGd8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGcpKXt2YXIgaD1nLnRoZW47aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgaClyZXR1cm4gdm9pZCBoLmNhbGwoZyxmdW5jdGlvbihhKXtkKGYsYSl9LGMpfWFbZl09ZywwPT09LS1lJiZiKGEpfWNhdGNoKGkpe2MoaSl9fWlmKDA9PT1hLmxlbmd0aClyZXR1cm4gYihbXSk7Zm9yKHZhciBlPWEubGVuZ3RoLGY9MDtmPGEubGVuZ3RoO2YrKylkKGYsYVtmXSl9KX0sYy5yZXNvbHZlPWZ1bmN0aW9uKGEpe3JldHVybiBhJiZcIm9iamVjdFwiPT10eXBlb2YgYSYmYS5jb25zdHJ1Y3Rvcj09PWM/YTpuZXcgYyhmdW5jdGlvbihiKXtiKGEpfSl9LGMucmVqZWN0PWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgYyhmdW5jdGlvbihiLGMpe2MoYSl9KX0sYy5yYWNlPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgYyhmdW5jdGlvbihiLGMpe2Zvcih2YXIgZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKylhW2RdLnRoZW4oYixjKX0pfSxjLl9zZXRJbW1lZGlhdGVGbj1mdW5jdGlvbihhKXtrPWF9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWM6YS5Qcm9taXNlfHwoYS5Qcm9taXNlPWMpfSh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgIT09IFwiZnVuY3Rpb25cIiApIHtcclxuICAgICAgICAoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgZnVuY3Rpb24gQ3VzdG9tRXZlbnQgKCBldmVudCwgcGFyYW1zICkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcGFyYW1zIHx8IHsgYnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IHVuZGVmaW5lZCB9O1xyXG4gICAgICAgICAgICAgICAgdmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCAnQ3VzdG9tRXZlbnQnICk7XHJcbiAgICAgICAgICAgICAgICBldnQuaW5pdEN1c3RvbUV2ZW50KCBldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZ0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIEN1c3RvbUV2ZW50LnByb3RvdHlwZSA9IHdpbmRvdy5FdmVudC5wcm90b3R5cGU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5DdXN0b21FdmVudCA9IEN1c3RvbUV2ZW50O1xyXG4gICAgICAgIH0oKSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFIVE1MQ2FudmFzRWxlbWVudC5wcm90b3R5cGUudG9CbG9iKSB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZSwgJ3RvQmxvYicsIHtcclxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChjYWxsYmFjaywgdHlwZSwgcXVhbGl0eSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJpblN0ciA9IGF0b2IoIHRoaXMudG9EYXRhVVJMKHR5cGUsIHF1YWxpdHkpLnNwbGl0KCcsJylbMV0gKSxcclxuICAgICAgICAgICAgICAgIGxlbiA9IGJpblN0ci5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICBhcnIgPSBuZXcgVWludDhBcnJheShsZW4pO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxsZW47IGkrKyApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbaV0gPSBiaW5TdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjayggbmV3IEJsb2IoIFthcnJdLCB7dHlwZTogdHlwZSB8fCAnaW1hZ2UvcG5nJ30gKSApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiBFbmQgUG9seWZpbGxzICovXHJcblxyXG4gICAgdmFyIGNzc1ByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ10sXHJcbiAgICAgICAgZW1wdHlTdHlsZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZSxcclxuICAgICAgICBDU1NfVFJBTlNfT1JHLFxyXG4gICAgICAgIENTU19UUkFOU0ZPUk0sXHJcbiAgICAgICAgQ1NTX1VTRVJTRUxFQ1Q7XHJcblxyXG4gICAgZnVuY3Rpb24gdmVuZG9yUHJlZml4KHByb3ApIHtcclxuICAgICAgICBpZiAocHJvcCBpbiBlbXB0eVN0eWxlcykge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBjYXBQcm9wID0gcHJvcFswXS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKSxcclxuICAgICAgICAgICAgaSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcclxuXHJcbiAgICAgICAgd2hpbGUgKGktLSkge1xyXG4gICAgICAgICAgICBwcm9wID0gY3NzUHJlZml4ZXNbaV0gKyBjYXBQcm9wO1xyXG4gICAgICAgICAgICBpZiAocHJvcCBpbiBlbXB0eVN0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgQ1NTX1RSQU5TRk9STSA9IHZlbmRvclByZWZpeCgndHJhbnNmb3JtJyk7XHJcbiAgICBDU1NfVFJBTlNfT1JHID0gdmVuZG9yUHJlZml4KCd0cmFuc2Zvcm1PcmlnaW4nKTtcclxuICAgIENTU19VU0VSU0VMRUNUID0gdmVuZG9yUHJlZml4KCd1c2VyU2VsZWN0Jyk7XHJcblxyXG4gICAgLy8gQ3JlZGl0cyB0byA6IEFuZHJldyBEdXBvbnQgLSBodHRwOi8vYW5kcmV3ZHVwb250Lm5ldC8yMDA5LzA4LzI4L2RlZXAtZXh0ZW5kaW5nLW9iamVjdHMtaW4tamF2YXNjcmlwdC9cclxuICAgIGZ1bmN0aW9uIGRlZXBFeHRlbmQoZGVzdGluYXRpb24sIHNvdXJjZSkge1xyXG4gICAgICAgIGRlc3RpbmF0aW9uID0gZGVzdGluYXRpb24gfHwge307XHJcbiAgICAgICAgZm9yICh2YXIgcHJvcGVydHkgaW4gc291cmNlKSB7XHJcbiAgICAgICAgICAgIGlmIChzb3VyY2VbcHJvcGVydHldICYmIHNvdXJjZVtwcm9wZXJ0eV0uY29uc3RydWN0b3IgJiYgc291cmNlW3Byb3BlcnR5XS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltwcm9wZXJ0eV0gPSBkZXN0aW5hdGlvbltwcm9wZXJ0eV0gfHwge307XHJcbiAgICAgICAgICAgICAgICBkZWVwRXh0ZW5kKGRlc3RpbmF0aW9uW3Byb3BlcnR5XSwgc291cmNlW3Byb3BlcnR5XSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbltwcm9wZXJ0eV0gPSBzb3VyY2VbcHJvcGVydHldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZXN0aW5hdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcclxuICAgICAgICB2YXIgdGltZW91dDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgICAgIHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcclxuICAgICAgICAgICAgaWYgKGNhbGxOb3cpIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwYXRjaENoYW5nZShlbGVtZW50KSB7XHJcbiAgICAgICAgaWYgKFwiY3JlYXRlRXZlbnRcIiBpbiBkb2N1bWVudCkge1xyXG4gICAgICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJIVE1MRXZlbnRzXCIpO1xyXG4gICAgICAgICAgICBldnQuaW5pdEV2ZW50KFwiY2hhbmdlXCIsIGZhbHNlLCB0cnVlKTtcclxuICAgICAgICAgICAgZWxlbWVudC5kaXNwYXRjaEV2ZW50KGV2dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBlbGVtZW50LmZpcmVFdmVudChcIm9uY2hhbmdlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL2h0dHA6Ly9qc3BlcmYuY29tL3ZhbmlsbGEtY3NzXHJcbiAgICBmdW5jdGlvbiBjc3MoZWwsIHN0eWxlcywgdmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoc3R5bGVzKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdmFyIHRtcCA9IHN0eWxlcztcclxuICAgICAgICAgICAgc3R5bGVzID0ge307XHJcbiAgICAgICAgICAgIHN0eWxlc1t0bXBdID0gdmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBzdHlsZXMpIHtcclxuICAgICAgICAgICAgZWwuc3R5bGVbcHJvcF0gPSBzdHlsZXNbcHJvcF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKGMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lICs9ICcgJyArIGM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjKSB7XHJcbiAgICAgICAgaWYgKGVsLmNsYXNzTGlzdCkge1xyXG4gICAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lLnJlcGxhY2UoYywgJycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRBdHRyaWJ1dGVzKGVsLCBhdHRycykge1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBhdHRycykge1xyXG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyc1trZXldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbnVtKHYpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQodiwgMTApO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIFV0aWxpdGllcyAqL1xyXG4gICAgZnVuY3Rpb24gbG9hZEltYWdlKHNyYywgaW1hZ2VFbCwgZG9FeGlmKSB7XHJcbiAgICAgICAgdmFyIGltZyA9IGltYWdlRWwgfHwgbmV3IEltYWdlKCk7XHJcbiAgICAgICAgaW1nLnN0eWxlLm9wYWNpdHkgPSAwO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gX3Jlc29sdmUoKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShpbWcpO1xyXG4gICAgICAgICAgICAgICAgfSwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbWcuc3JjID09PSBzcmMpIHsvLyBJZiBpbWFnZSBzb3VyY2UgaGFzbid0IGNoYW5nZWQgcmVzb2x2ZSBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICAgICAgX3Jlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaW1nLmV4aWZkYXRhID0gbnVsbDtcclxuICAgICAgICAgICAgaW1nLnJlbW92ZUF0dHJpYnV0ZSgnY3Jvc3NPcmlnaW4nKTtcclxuICAgICAgICAgICAgaWYgKHNyYy5tYXRjaCgvXmh0dHBzPzpcXC9cXC98XlxcL1xcLy8pKSB7XHJcbiAgICAgICAgICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdjcm9zc09yaWdpbicsICdhbm9ueW1vdXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvRXhpZikge1xyXG4gICAgICAgICAgICAgICAgICAgIEVYSUYuZ2V0RGF0YShpbWcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3Jlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF9yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGltZy5zcmMgPSBzcmM7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbmF0dXJhbEltYWdlRGltZW5zaW9ucyhpbWcpIHtcclxuICAgICAgICB2YXIgdyA9IGltZy5uYXR1cmFsV2lkdGg7XHJcbiAgICAgICAgdmFyIGggPSBpbWcubmF0dXJhbEhlaWdodDtcclxuICAgICAgICBpZiAoaW1nLmV4aWZkYXRhICYmIGltZy5leGlmZGF0YS5PcmllbnRhdGlvbiA+PSA1KSB7XHJcbiAgICAgICAgICAgIHZhciB4PSB3O1xyXG4gICAgICAgICAgICB3ID0gaDtcclxuICAgICAgICAgICAgaCA9IHg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7IHdpZHRoOiB3LCBoZWlnaHQ6IGggfTtcclxuICAgIH1cclxuXHJcbiAgICAvKiBDU1MgVHJhbnNmb3JtIFByb3RvdHlwZSAqL1xyXG4gICAgdmFyIFRSQU5TTEFURV9PUFRTID0ge1xyXG4gICAgICAgICd0cmFuc2xhdGUzZCc6IHtcclxuICAgICAgICAgICAgc3VmZml4OiAnLCAwcHgnXHJcbiAgICAgICAgfSxcclxuICAgICAgICAndHJhbnNsYXRlJzoge1xyXG4gICAgICAgICAgICBzdWZmaXg6ICcnXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHZhciBUcmFuc2Zvcm0gPSBmdW5jdGlvbiAoeCwgeSwgc2NhbGUpIHtcclxuICAgICAgICB0aGlzLnggPSBwYXJzZUZsb2F0KHgpO1xyXG4gICAgICAgIHRoaXMueSA9IHBhcnNlRmxvYXQoeSk7XHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IHBhcnNlRmxvYXQoc2NhbGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBUcmFuc2Zvcm0ucGFyc2UgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIGlmICh2LnN0eWxlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0ucGFyc2Uodi5zdHlsZVtDU1NfVFJBTlNGT1JNXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHYuaW5kZXhPZignbWF0cml4JykgPiAtMSB8fCB2LmluZGV4T2YoJ25vbmUnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0uZnJvbU1hdHJpeCh2KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUcmFuc2Zvcm0uZnJvbVN0cmluZyh2KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFRyYW5zZm9ybS5mcm9tTWF0cml4ID0gZnVuY3Rpb24gKHYpIHtcclxuICAgICAgICB2YXIgdmFscyA9IHYuc3Vic3RyaW5nKDcpLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgaWYgKCF2YWxzLmxlbmd0aCB8fCB2ID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgdmFscyA9IFsxLCAwLCAwLCAxLCAwLCAwXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNmb3JtKG51bSh2YWxzWzRdKSwgbnVtKHZhbHNbNV0pLCBwYXJzZUZsb2F0KHZhbHNbMF0pKTtcclxuICAgIH07XHJcblxyXG4gICAgVHJhbnNmb3JtLmZyb21TdHJpbmcgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHZhciB2YWx1ZXMgPSB2LnNwbGl0KCcpICcpLFxyXG4gICAgICAgICAgICB0cmFuc2xhdGUgPSB2YWx1ZXNbMF0uc3Vic3RyaW5nKENyb3BwaWUuZ2xvYmFscy50cmFuc2xhdGUubGVuZ3RoICsgMSkuc3BsaXQoJywnKSxcclxuICAgICAgICAgICAgc2NhbGUgPSB2YWx1ZXMubGVuZ3RoID4gMSA/IHZhbHVlc1sxXS5zdWJzdHJpbmcoNikgOiAxLFxyXG4gICAgICAgICAgICB4ID0gdHJhbnNsYXRlLmxlbmd0aCA+IDEgPyB0cmFuc2xhdGVbMF0gOiAwLFxyXG4gICAgICAgICAgICB5ID0gdHJhbnNsYXRlLmxlbmd0aCA+IDEgPyB0cmFuc2xhdGVbMV0gOiAwO1xyXG5cclxuICAgICAgICByZXR1cm4gbmV3IFRyYW5zZm9ybSh4LCB5LCBzY2FsZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFRyYW5zZm9ybS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHN1ZmZpeCA9IFRSQU5TTEFURV9PUFRTW0Nyb3BwaWUuZ2xvYmFscy50cmFuc2xhdGVdLnN1ZmZpeCB8fCAnJztcclxuICAgICAgICByZXR1cm4gQ3JvcHBpZS5nbG9iYWxzLnRyYW5zbGF0ZSArICcoJyArIHRoaXMueCArICdweCwgJyArIHRoaXMueSArICdweCcgKyBzdWZmaXggKyAnKSBzY2FsZSgnICsgdGhpcy5zY2FsZSArICcpJztcclxuICAgIH07XHJcblxyXG4gICAgdmFyIFRyYW5zZm9ybU9yaWdpbiA9IGZ1bmN0aW9uIChlbCkge1xyXG4gICAgICAgIGlmICghZWwgfHwgIWVsLnN0eWxlW0NTU19UUkFOU19PUkddKSB7XHJcbiAgICAgICAgICAgIHRoaXMueCA9IDA7XHJcbiAgICAgICAgICAgIHRoaXMueSA9IDA7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNzcyA9IGVsLnN0eWxlW0NTU19UUkFOU19PUkddLnNwbGl0KCcgJyk7XHJcbiAgICAgICAgdGhpcy54ID0gcGFyc2VGbG9hdChjc3NbMF0pO1xyXG4gICAgICAgIHRoaXMueSA9IHBhcnNlRmxvYXQoY3NzWzFdKTtcclxuICAgIH07XHJcblxyXG4gICAgVHJhbnNmb3JtT3JpZ2luLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy54ICsgJ3B4ICcgKyB0aGlzLnkgKyAncHgnO1xyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBnZXRFeGlmT3JpZW50YXRpb24gKGltZykge1xyXG4gICAgICAgIHJldHVybiBpbWcuZXhpZmRhdGEuT3JpZW50YXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZHJhd0NhbnZhcyhjYW52YXMsIGltZywgb3JpZW50YXRpb24pIHtcclxuICAgICAgICB2YXIgd2lkdGggPSBpbWcud2lkdGgsXHJcbiAgICAgICAgICAgIGhlaWdodCA9IGltZy5oZWlnaHQsXHJcbiAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgICBjYW52YXMud2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IGltZy5oZWlnaHQ7XHJcblxyXG4gICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgc3dpdGNoIChvcmllbnRhdGlvbikge1xyXG4gICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSh3aWR0aCwgMCk7XHJcbiAgICAgICAgICAgICBjdHguc2NhbGUoLTEsIDEpO1xyXG4gICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUod2lkdGgsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgxODAqTWF0aC5QSS8xODApO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGNhc2UgNDpcclxuICAgICAgICAgICAgICBjdHgudHJhbnNsYXRlKDAsIGhlaWdodCk7XHJcbiAgICAgICAgICAgICAgY3R4LnNjYWxlKDEsIC0xKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgY2FudmFzLndpZHRoID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aWR0aDtcclxuICAgICAgICAgICAgICBjdHgucm90YXRlKDkwKk1hdGguUEkvMTgwKTtcclxuICAgICAgICAgICAgICBjdHguc2NhbGUoMSwgLTEpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgIGNhc2UgNjpcclxuICAgICAgICAgICAgICBjYW52YXMud2lkdGggPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgY2FudmFzLmhlaWdodCA9IHdpZHRoO1xyXG4gICAgICAgICAgICAgIGN0eC5yb3RhdGUoOTAqTWF0aC5QSS8xODApO1xyXG4gICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoMCwgLWhlaWdodCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgY2FzZSA3OlxyXG4gICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtOTAqTWF0aC5QSS8xODApO1xyXG4gICAgICAgICAgICAgIGN0eC50cmFuc2xhdGUoLXdpZHRoLCBoZWlnaHQpO1xyXG4gICAgICAgICAgICAgIGN0eC5zY2FsZSgxLCAtMSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgY2FzZSA4OlxyXG4gICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gd2lkdGg7XHJcbiAgICAgICAgICAgICAgY3R4LnRyYW5zbGF0ZSgwLCB3aWR0aCk7XHJcbiAgICAgICAgICAgICAgY3R4LnJvdGF0ZSgtOTAqTWF0aC5QSS8xODApO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIFByaXZhdGUgTWV0aG9kcyAqL1xyXG4gICAgZnVuY3Rpb24gX2NyZWF0ZSgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIGNvbnRDbGFzcyA9ICdjcm9wcGllLWNvbnRhaW5lcicsXHJcbiAgICAgICAgICAgIGN1c3RvbVZpZXdwb3J0Q2xhc3MgPSBzZWxmLm9wdGlvbnMudmlld3BvcnQudHlwZSA/ICdjci12cC0nICsgc2VsZi5vcHRpb25zLnZpZXdwb3J0LnR5cGUgOiBudWxsLFxyXG4gICAgICAgICAgICBib3VuZGFyeSwgaW1nLCB2aWV3cG9ydCwgb3ZlcmxheSwgYncsIGJoO1xyXG5cclxuICAgICAgICBzZWxmLm9wdGlvbnMudXNlQ2FudmFzID0gc2VsZi5vcHRpb25zLmVuYWJsZU9yaWVudGF0aW9uIHx8IF9oYXNFeGlmLmNhbGwoc2VsZik7XHJcbiAgICAgICAgLy8gUHJvcGVydGllcyBvbiBjbGFzc1xyXG4gICAgICAgIHNlbGYuZGF0YSA9IHt9O1xyXG4gICAgICAgIHNlbGYuZWxlbWVudHMgPSB7fTtcclxuXHJcbiAgICAgICAgYm91bmRhcnkgPSBzZWxmLmVsZW1lbnRzLmJvdW5kYXJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdmlld3BvcnQgPSBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgaW1nID0gc2VsZi5lbGVtZW50cy5pbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcclxuICAgICAgICBvdmVybGF5ID0gc2VsZi5lbGVtZW50cy5vdmVybGF5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMudXNlQ2FudmFzKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZWxlbWVudHMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICAgICAgICAgIHNlbGYuZWxlbWVudHMucHJldmlldyA9IHNlbGYuZWxlbWVudHMuY2FudmFzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5lbGVtZW50cy5wcmV2aWV3ID0gc2VsZi5lbGVtZW50cy5pbWc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZGRDbGFzcyhib3VuZGFyeSwgJ2NyLWJvdW5kYXJ5Jyk7XHJcbiAgICAgICAgYm91bmRhcnkuc2V0QXR0cmlidXRlKCdhcmlhLWRyb3BlZmZlY3QnLCAnbm9uZScpO1xyXG4gICAgICAgIGJ3ID0gc2VsZi5vcHRpb25zLmJvdW5kYXJ5LndpZHRoO1xyXG4gICAgICAgIGJoID0gc2VsZi5vcHRpb25zLmJvdW5kYXJ5LmhlaWdodDtcclxuICAgICAgICBjc3MoYm91bmRhcnksIHtcclxuICAgICAgICAgICAgd2lkdGg6IChidyArIChpc05hTihidykgPyAnJyA6ICdweCcpKSxcclxuICAgICAgICAgICAgaGVpZ2h0OiAoYmggKyAoaXNOYU4oYmgpID8gJycgOiAncHgnKSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWRkQ2xhc3Modmlld3BvcnQsICdjci12aWV3cG9ydCcpO1xyXG4gICAgICAgIGlmIChjdXN0b21WaWV3cG9ydENsYXNzKSB7XHJcbiAgICAgICAgICAgIGFkZENsYXNzKHZpZXdwb3J0LCBjdXN0b21WaWV3cG9ydENsYXNzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY3NzKHZpZXdwb3J0LCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiBzZWxmLm9wdGlvbnMudmlld3BvcnQud2lkdGggKyAncHgnLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHNlbGYub3B0aW9ucy52aWV3cG9ydC5oZWlnaHQgKyAncHgnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmlld3BvcnQuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xyXG5cclxuICAgICAgICBhZGRDbGFzcyhzZWxmLmVsZW1lbnRzLnByZXZpZXcsICdjci1pbWFnZScpO1xyXG4gICAgICAgIHNldEF0dHJpYnV0ZXMoc2VsZi5lbGVtZW50cy5wcmV2aWV3LCB7ICdhbHQnOiAncHJldmlldycsICdhcmlhLWdyYWJiZWQnOiAnZmFsc2UnIH0pO1xyXG4gICAgICAgIGFkZENsYXNzKG92ZXJsYXksICdjci1vdmVybGF5Jyk7XHJcblxyXG4gICAgICAgIHNlbGYuZWxlbWVudC5hcHBlbmRDaGlsZChib3VuZGFyeSk7XHJcbiAgICAgICAgYm91bmRhcnkuYXBwZW5kQ2hpbGQoc2VsZi5lbGVtZW50cy5wcmV2aWV3KTtcclxuICAgICAgICBib3VuZGFyeS5hcHBlbmRDaGlsZCh2aWV3cG9ydCk7XHJcbiAgICAgICAgYm91bmRhcnkuYXBwZW5kQ2hpbGQob3ZlcmxheSk7XHJcblxyXG4gICAgICAgIGFkZENsYXNzKHNlbGYuZWxlbWVudCwgY29udENsYXNzKTtcclxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmN1c3RvbUNsYXNzKSB7XHJcbiAgICAgICAgICAgIGFkZENsYXNzKHNlbGYuZWxlbWVudCwgc2VsZi5vcHRpb25zLmN1c3RvbUNsYXNzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9pbml0RHJhZ2dhYmxlLmNhbGwodGhpcyk7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZW5hYmxlWm9vbSkge1xyXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZVpvb20uY2FsbChzZWxmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGlmIChzZWxmLm9wdGlvbnMuZW5hYmxlT3JpZW50YXRpb24pIHtcclxuICAgICAgICAvLyAgICAgX2luaXRSb3RhdGlvbkNvbnRyb2xzLmNhbGwoc2VsZik7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmVuYWJsZVJlc2l6ZSkge1xyXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZVJlc2l6ZS5jYWxsKHNlbGYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBmdW5jdGlvbiBfaW5pdFJvdGF0aW9uQ29udHJvbHMgKCkge1xyXG4gICAgLy8gICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgIC8vICAgICAgICAgd3JhcCwgYnRuTGVmdCwgYnRuUmlnaHQsIGlMZWZ0LCBpUmlnaHQ7XHJcblxyXG4gICAgLy8gICAgIHdyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIC8vICAgICBzZWxmLmVsZW1lbnRzLm9yaWVudGF0aW9uQnRuTGVmdCA9IGJ0bkxlZnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgIC8vICAgICBzZWxmLmVsZW1lbnRzLm9yaWVudGF0aW9uQnRuUmlnaHQgPSBidG5SaWdodCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG5cclxuICAgIC8vICAgICB3cmFwLmFwcGVuZENoaWxkKGJ0bkxlZnQpO1xyXG4gICAgLy8gICAgIHdyYXAuYXBwZW5kQ2hpbGQoYnRuUmlnaHQpO1xyXG5cclxuICAgIC8vICAgICBpTGVmdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcclxuICAgIC8vICAgICBpUmlnaHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XHJcbiAgICAvLyAgICAgYnRuTGVmdC5hcHBlbmRDaGlsZChpTGVmdCk7XHJcbiAgICAvLyAgICAgYnRuUmlnaHQuYXBwZW5kQ2hpbGQoaVJpZ2h0KTtcclxuXHJcbiAgICAvLyAgICAgYWRkQ2xhc3Mod3JhcCwgJ2NyLXJvdGF0ZS1jb250cm9scycpO1xyXG4gICAgLy8gICAgIGFkZENsYXNzKGJ0bkxlZnQsICdjci1yb3RhdGUtbCcpO1xyXG4gICAgLy8gICAgIGFkZENsYXNzKGJ0blJpZ2h0LCAnY3Itcm90YXRlLXInKTtcclxuXHJcbiAgICAvLyAgICAgc2VsZi5lbGVtZW50cy5ib3VuZGFyeS5hcHBlbmRDaGlsZCh3cmFwKTtcclxuXHJcbiAgICAvLyAgICAgYnRuTGVmdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICAgICAgc2VsZi5yb3RhdGUoLTkwKTtcclxuICAgIC8vICAgICB9KTtcclxuICAgIC8vICAgICBidG5SaWdodC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgIC8vICAgICAgICAgc2VsZi5yb3RhdGUoOTApO1xyXG4gICAgLy8gICAgIH0pO1xyXG4gICAgLy8gfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9oYXNFeGlmKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuZW5hYmxlRXhpZiAmJiB3aW5kb3cuRVhJRjtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfaW5pdGlhbGl6ZVJlc2l6ZSAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciB3cmFwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdmFyIGlzRHJhZ2dpbmcgPSBmYWxzZTtcclxuICAgICAgICB2YXIgZGlyZWN0aW9uO1xyXG4gICAgICAgIHZhciBvcmlnaW5hbFg7XHJcbiAgICAgICAgdmFyIG9yaWdpbmFsWTtcclxuICAgICAgICB2YXIgbWluU2l6ZSA9IDUwO1xyXG4gICAgICAgIHZhciBtYXhXaWR0aDtcclxuICAgICAgICB2YXIgbWF4SGVpZ2h0O1xyXG4gICAgICAgIHZhciB2cjtcclxuICAgICAgICB2YXIgaHI7XHJcblxyXG4gICAgICAgIGFkZENsYXNzKHdyYXAsICdjci1yZXNpemVyJyk7XHJcbiAgICAgICAgY3NzKHdyYXAsIHtcclxuICAgICAgICAgICAgd2lkdGg6IHRoaXMub3B0aW9ucy52aWV3cG9ydC53aWR0aCArICdweCcsXHJcbiAgICAgICAgICAgIGhlaWdodDogdGhpcy5vcHRpb25zLnZpZXdwb3J0LmhlaWdodCArICdweCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNpemVDb250cm9scy5oZWlnaHQpIHtcclxuICAgICAgICAgICAgdnIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgYWRkQ2xhc3ModnIsICdjci1yZXNpemVyLXZlcnRpY2FsJyk7XHJcbiAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQodnIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZXNpemVDb250cm9scy53aWR0aCkge1xyXG4gICAgICAgICAgICBociA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBhZGRDbGFzcyhociwgJ2NyLXJlc2l6ZXItaG9yaXNvbnRhbCcpO1xyXG4gICAgICAgICAgICB3cmFwLmFwcGVuZENoaWxkKGhyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1vdXNlRG93bihldikge1xyXG4gICAgICAgICAgICBpZiAoZXYuYnV0dG9uICE9PSB1bmRlZmluZWQgJiYgZXYuYnV0dG9uICE9PSAwKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgb3ZlcmxheVJlY3QgPSBzZWxmLmVsZW1lbnRzLm92ZXJsYXkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgb3JpZ2luYWxYID0gZXYucGFnZVg7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsWSA9IGV2LnBhZ2VZO1xyXG4gICAgICAgICAgICBkaXJlY3Rpb24gPSBldi5jdXJyZW50VGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKCd2ZXJ0aWNhbCcpICE9PSAtMSA/ICd2JyA6ICdoJztcclxuICAgICAgICAgICAgbWF4V2lkdGggPSBvdmVybGF5UmVjdC53aWR0aDtcclxuICAgICAgICAgICAgbWF4SGVpZ2h0ID0gb3ZlcmxheVJlY3QuaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2LnRvdWNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3VjaGVzID0gZXYudG91Y2hlc1swXTtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsWCA9IHRvdWNoZXMucGFnZVg7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbFkgPSB0b3VjaGVzLnBhZ2VZO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlKTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG1vdXNlTW92ZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG1vdXNlVXApO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlW0NTU19VU0VSU0VMRUNUXSA9ICdub25lJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG1vdXNlTW92ZShldikge1xyXG4gICAgICAgICAgICB2YXIgcGFnZVggPSBldi5wYWdlWDtcclxuICAgICAgICAgICAgdmFyIHBhZ2VZID0gZXYucGFnZVk7XHJcblxyXG4gICAgICAgICAgICBldi5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2LnRvdWNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3VjaGVzID0gZXYudG91Y2hlc1swXTtcclxuICAgICAgICAgICAgICAgIHBhZ2VYID0gdG91Y2hlcy5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHBhZ2VZID0gdG91Y2hlcy5wYWdlWTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRlbHRhWCA9IHBhZ2VYIC0gb3JpZ2luYWxYO1xyXG4gICAgICAgICAgICB2YXIgZGVsdGFZID0gcGFnZVkgLSBvcmlnaW5hbFk7XHJcbiAgICAgICAgICAgIHZhciBuZXdIZWlnaHQgPSBzZWxmLm9wdGlvbnMudmlld3BvcnQuaGVpZ2h0ICsgZGVsdGFZO1xyXG4gICAgICAgICAgICB2YXIgbmV3V2lkdGggPSBzZWxmLm9wdGlvbnMudmlld3BvcnQud2lkdGggKyBkZWx0YVg7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAndicgJiYgbmV3SGVpZ2h0ID49IG1pblNpemUgJiYgbmV3SGVpZ2h0IDw9IG1heEhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY3NzKHdyYXAsIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IG5ld0hlaWdodCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGYub3B0aW9ucy5ib3VuZGFyeS5oZWlnaHQgKz0gZGVsdGFZO1xyXG4gICAgICAgICAgICAgICAgY3NzKHNlbGYuZWxlbWVudHMuYm91bmRhcnksIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHNlbGYub3B0aW9ucy5ib3VuZGFyeS5oZWlnaHQgKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMudmlld3BvcnQuaGVpZ2h0ICs9IGRlbHRhWTtcclxuICAgICAgICAgICAgICAgIGNzcyhzZWxmLmVsZW1lbnRzLnZpZXdwb3J0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzZWxmLm9wdGlvbnMudmlld3BvcnQuaGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoZGlyZWN0aW9uID09PSAnaCcgJiYgbmV3V2lkdGggPj0gbWluU2l6ZSAmJiBuZXdXaWR0aCA8PSBtYXhXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgY3NzKHdyYXAsIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogbmV3V2lkdGggKyAncHgnXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMuYm91bmRhcnkud2lkdGggKz0gZGVsdGFYO1xyXG4gICAgICAgICAgICAgICAgY3NzKHNlbGYuZWxlbWVudHMuYm91bmRhcnksIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogc2VsZi5vcHRpb25zLmJvdW5kYXJ5LndpZHRoICsgJ3B4J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5vcHRpb25zLnZpZXdwb3J0LndpZHRoICs9IGRlbHRhWDtcclxuICAgICAgICAgICAgICAgIGNzcyhzZWxmLmVsZW1lbnRzLnZpZXdwb3J0LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHNlbGYub3B0aW9ucy52aWV3cG9ydC53aWR0aCArICdweCdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfdXBkYXRlT3ZlcmxheS5jYWxsKHNlbGYpO1xyXG4gICAgICAgICAgICBfdXBkYXRlWm9vbUxpbWl0cy5jYWxsKHNlbGYpO1xyXG4gICAgICAgICAgICBfdXBkYXRlQ2VudGVyUG9pbnQuY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgX3RyaWdnZXJVcGRhdGUuY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgb3JpZ2luYWxZID0gcGFnZVk7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsWCA9IHBhZ2VYO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbW91c2VVcCgpIHtcclxuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgbW91c2VNb3ZlKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIG1vdXNlTW92ZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgbW91c2VVcCk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIG1vdXNlVXApO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlW0NTU19VU0VSU0VMRUNUXSA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHZyKSB7XHJcbiAgICAgICAgICAgIHZyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlRG93bik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaHIpIHtcclxuICAgICAgICAgICAgaHIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgbW91c2VEb3duKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZWxlbWVudHMuYm91bmRhcnkuYXBwZW5kQ2hpbGQod3JhcCk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX3NldFpvb21lclZhbCh2KSB7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lbmFibGVab29tKSB7XHJcbiAgICAgICAgICAgIHZhciB6ID0gdGhpcy5lbGVtZW50cy56b29tZXIsXHJcbiAgICAgICAgICAgICAgICB2YWwgPSBmaXgodiwgNCk7XHJcblxyXG4gICAgICAgICAgICB6LnZhbHVlID0gTWF0aC5tYXgoei5taW4sIE1hdGgubWluKHoubWF4LCB2YWwpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2luaXRpYWxpemVab29tKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgd3JhcCA9IHNlbGYuZWxlbWVudHMuem9vbWVyV3JhcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpLFxyXG4gICAgICAgICAgICB6b29tZXIgPSBzZWxmLmVsZW1lbnRzLnpvb21lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XHJcblxyXG4gICAgICAgIGFkZENsYXNzKHdyYXAsICdjci1zbGlkZXItd3JhcCcpO1xyXG4gICAgICAgIGFkZENsYXNzKHpvb21lciwgJ2NyLXNsaWRlcicpO1xyXG4gICAgICAgIHpvb21lci50eXBlID0gJ3JhbmdlJztcclxuICAgICAgICB6b29tZXIuc3RlcCA9ICcwLjAwMDEnO1xyXG4gICAgICAgIHpvb21lci52YWx1ZSA9IDE7XHJcbiAgICAgICAgem9vbWVyLnN0eWxlLmRpc3BsYXkgPSBzZWxmLm9wdGlvbnMuc2hvd1pvb21lciA/ICcnIDogJ25vbmUnO1xyXG4gICAgICAgIHpvb21lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnem9vbScpO1xyXG5cclxuICAgICAgICBzZWxmLmVsZW1lbnQuYXBwZW5kQ2hpbGQod3JhcCk7XHJcbiAgICAgICAgd3JhcC5hcHBlbmRDaGlsZCh6b29tZXIpO1xyXG5cclxuICAgICAgICBzZWxmLl9jdXJyZW50Wm9vbSA9IDE7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNoYW5nZSgpIHtcclxuICAgICAgICAgICAgX29uWm9vbS5jYWxsKHNlbGYsIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJzZUZsb2F0KHpvb21lci52YWx1ZSksXHJcbiAgICAgICAgICAgICAgICBvcmlnaW46IG5ldyBUcmFuc2Zvcm1PcmlnaW4oc2VsZi5lbGVtZW50cy5wcmV2aWV3KSxcclxuICAgICAgICAgICAgICAgIHZpZXdwb3J0UmVjdDogc2VsZi5lbGVtZW50cy52aWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogVHJhbnNmb3JtLnBhcnNlKHNlbGYuZWxlbWVudHMucHJldmlldylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzY3JvbGwoZXYpIHtcclxuICAgICAgICAgICAgdmFyIGRlbHRhLCB0YXJnZXRab29tO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2LndoZWVsRGVsdGEpIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhID0gZXYud2hlZWxEZWx0YSAvIDEyMDA7IC8vd2hlZWxEZWx0YSBtaW46IC0xMjAgbWF4OiAxMjAgLy8gbWF4IHggMTAgeCAyXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuZGVsdGFZKSB7XHJcbiAgICAgICAgICAgICAgICBkZWx0YSA9IGV2LmRlbHRhWSAvIDEwNjA7IC8vZGVsdGFZIG1pbjogLTUzIG1heDogNTMgLy8gbWF4IHggMTAgeCAyXHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXYuZGV0YWlsKSB7XHJcbiAgICAgICAgICAgICAgICBkZWx0YSA9IGV2LmRldGFpbCAvIC02MDsgLy9kZWx0YSBtaW46IC0zIG1heDogMyAvLyBtYXggeCAxMCB4IDJcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhID0gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGFyZ2V0Wm9vbSA9IHNlbGYuX2N1cnJlbnRab29tICsgKGRlbHRhICogc2VsZi5fY3VycmVudFpvb20pO1xyXG5cclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgX3NldFpvb21lclZhbC5jYWxsKHNlbGYsIHRhcmdldFpvb20pO1xyXG4gICAgICAgICAgICBjaGFuZ2UuY2FsbChzZWxmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYuZWxlbWVudHMuem9vbWVyLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgY2hhbmdlKTsvLyB0aGlzIGlzIGJlaW5nIGZpcmVkIHR3aWNlIG9uIGtleXByZXNzXHJcbiAgICAgICAgc2VsZi5lbGVtZW50cy56b29tZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgY2hhbmdlKTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5tb3VzZVdoZWVsWm9vbSkge1xyXG4gICAgICAgICAgICBzZWxmLmVsZW1lbnRzLmJvdW5kYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNld2hlZWwnLCBzY3JvbGwpO1xyXG4gICAgICAgICAgICBzZWxmLmVsZW1lbnRzLmJvdW5kYXJ5LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTU1vdXNlU2Nyb2xsJywgc2Nyb2xsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX29uWm9vbSh1aSkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gdWkgPyB1aS50cmFuc2Zvcm0gOiBUcmFuc2Zvcm0ucGFyc2Uoc2VsZi5lbGVtZW50cy5wcmV2aWV3KSxcclxuICAgICAgICAgICAgdnBSZWN0ID0gdWkgPyB1aS52aWV3cG9ydFJlY3QgOiBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICBvcmlnaW4gPSB1aSA/IHVpLm9yaWdpbiA6IG5ldyBUcmFuc2Zvcm1PcmlnaW4oc2VsZi5lbGVtZW50cy5wcmV2aWV3KTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYXBwbHlDc3MoKSB7XHJcbiAgICAgICAgICAgIHZhciB0cmFuc0NzcyA9IHt9O1xyXG4gICAgICAgICAgICB0cmFuc0Nzc1tDU1NfVFJBTlNGT1JNXSA9IHRyYW5zZm9ybS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB0cmFuc0Nzc1tDU1NfVFJBTlNfT1JHXSA9IG9yaWdpbi50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBjc3Moc2VsZi5lbGVtZW50cy5wcmV2aWV3LCB0cmFuc0Nzcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLl9jdXJyZW50Wm9vbSA9IHVpID8gdWkudmFsdWUgOiBzZWxmLl9jdXJyZW50Wm9vbTtcclxuICAgICAgICB0cmFuc2Zvcm0uc2NhbGUgPSBzZWxmLl9jdXJyZW50Wm9vbTtcclxuICAgICAgICBzZWxmLmVsZW1lbnRzLnpvb21lci5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCBzZWxmLl9jdXJyZW50Wm9vbSk7XHJcbiAgICAgICAgYXBwbHlDc3MoKTtcclxuXHJcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5lbmZvcmNlQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgdmFyIGJvdW5kYXJpZXMgPSBfZ2V0VmlydHVhbEJvdW5kYXJpZXMuY2FsbChzZWxmLCB2cFJlY3QpLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNCb3VuZGFyaWVzID0gYm91bmRhcmllcy50cmFuc2xhdGUsXHJcbiAgICAgICAgICAgICAgICBvQm91bmRhcmllcyA9IGJvdW5kYXJpZXMub3JpZ2luO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybS54ID49IHRyYW5zQm91bmRhcmllcy5tYXhYKSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW4ueCA9IG9Cb3VuZGFyaWVzLm1pblg7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ueCA9IHRyYW5zQm91bmRhcmllcy5tYXhYO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodHJhbnNmb3JtLnggPD0gdHJhbnNCb3VuZGFyaWVzLm1pblgpIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbi54ID0gb0JvdW5kYXJpZXMubWF4WDtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS54ID0gdHJhbnNCb3VuZGFyaWVzLm1pblg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0ueSA+PSB0cmFuc0JvdW5kYXJpZXMubWF4WSkge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luLnkgPSBvQm91bmRhcmllcy5taW5ZO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLnkgPSB0cmFuc0JvdW5kYXJpZXMubWF4WTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRyYW5zZm9ybS55IDw9IHRyYW5zQm91bmRhcmllcy5taW5ZKSB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW4ueSA9IG9Cb3VuZGFyaWVzLm1heFk7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ueSA9IHRyYW5zQm91bmRhcmllcy5taW5ZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFwcGx5Q3NzKCk7XHJcbiAgICAgICAgX2RlYm91bmNlZE92ZXJsYXkuY2FsbChzZWxmKTtcclxuICAgICAgICBfdHJpZ2dlclVwZGF0ZS5jYWxsKHNlbGYpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9nZXRWaXJ0dWFsQm91bmRhcmllcyh2aWV3cG9ydCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgc2NhbGUgPSBzZWxmLl9jdXJyZW50Wm9vbSxcclxuICAgICAgICAgICAgdnBXaWR0aCA9IHZpZXdwb3J0LndpZHRoLFxyXG4gICAgICAgICAgICB2cEhlaWdodCA9IHZpZXdwb3J0LmhlaWdodCxcclxuICAgICAgICAgICAgY2VudGVyRnJvbUJvdW5kYXJ5WCA9IHNlbGYuZWxlbWVudHMuYm91bmRhcnkuY2xpZW50V2lkdGggLyAyLFxyXG4gICAgICAgICAgICBjZW50ZXJGcm9tQm91bmRhcnlZID0gc2VsZi5lbGVtZW50cy5ib3VuZGFyeS5jbGllbnRIZWlnaHQgLyAyLFxyXG4gICAgICAgICAgICBpbWdSZWN0ID0gc2VsZi5lbGVtZW50cy5wcmV2aWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICBjdXJJbWdXaWR0aCA9IGltZ1JlY3Qud2lkdGgsXHJcbiAgICAgICAgICAgIGN1ckltZ0hlaWdodCA9IGltZ1JlY3QuaGVpZ2h0LFxyXG4gICAgICAgICAgICBoYWxmV2lkdGggPSB2cFdpZHRoIC8gMixcclxuICAgICAgICAgICAgaGFsZkhlaWdodCA9IHZwSGVpZ2h0IC8gMjtcclxuXHJcbiAgICAgICAgdmFyIG1heFggPSAoKGhhbGZXaWR0aCAvIHNjYWxlKSAtIGNlbnRlckZyb21Cb3VuZGFyeVgpICogLTE7XHJcbiAgICAgICAgdmFyIG1pblggPSBtYXhYIC0gKChjdXJJbWdXaWR0aCAqICgxIC8gc2NhbGUpKSAtICh2cFdpZHRoICogKDEgLyBzY2FsZSkpKTtcclxuXHJcbiAgICAgICAgdmFyIG1heFkgPSAoKGhhbGZIZWlnaHQgLyBzY2FsZSkgLSBjZW50ZXJGcm9tQm91bmRhcnlZKSAqIC0xO1xyXG4gICAgICAgIHZhciBtaW5ZID0gbWF4WSAtICgoY3VySW1nSGVpZ2h0ICogKDEgLyBzY2FsZSkpIC0gKHZwSGVpZ2h0ICogKDEgLyBzY2FsZSkpKTtcclxuXHJcbiAgICAgICAgdmFyIG9yaWdpbk1pblggPSAoMSAvIHNjYWxlKSAqIGhhbGZXaWR0aDtcclxuICAgICAgICB2YXIgb3JpZ2luTWF4WCA9IChjdXJJbWdXaWR0aCAqICgxIC8gc2NhbGUpKSAtIG9yaWdpbk1pblg7XHJcblxyXG4gICAgICAgIHZhciBvcmlnaW5NaW5ZID0gKDEgLyBzY2FsZSkgKiBoYWxmSGVpZ2h0O1xyXG4gICAgICAgIHZhciBvcmlnaW5NYXhZID0gKGN1ckltZ0hlaWdodCAqICgxIC8gc2NhbGUpKSAtIG9yaWdpbk1pblk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRyYW5zbGF0ZToge1xyXG4gICAgICAgICAgICAgICAgbWF4WDogbWF4WCxcclxuICAgICAgICAgICAgICAgIG1pblg6IG1pblgsXHJcbiAgICAgICAgICAgICAgICBtYXhZOiBtYXhZLFxyXG4gICAgICAgICAgICAgICAgbWluWTogbWluWVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvcmlnaW46IHtcclxuICAgICAgICAgICAgICAgIG1heFg6IG9yaWdpbk1heFgsXHJcbiAgICAgICAgICAgICAgICBtaW5YOiBvcmlnaW5NaW5YLFxyXG4gICAgICAgICAgICAgICAgbWF4WTogb3JpZ2luTWF4WSxcclxuICAgICAgICAgICAgICAgIG1pblk6IG9yaWdpbk1pbllcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX3VwZGF0ZUNlbnRlclBvaW50KCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgc2NhbGUgPSBzZWxmLl9jdXJyZW50Wm9vbSxcclxuICAgICAgICAgICAgZGF0YSA9IHNlbGYuZWxlbWVudHMucHJldmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgdnBEYXRhID0gc2VsZi5lbGVtZW50cy52aWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgdHJhbnNmb3JtID0gVHJhbnNmb3JtLnBhcnNlKHNlbGYuZWxlbWVudHMucHJldmlldy5zdHlsZVtDU1NfVFJBTlNGT1JNXSksXHJcbiAgICAgICAgICAgIHBjID0gbmV3IFRyYW5zZm9ybU9yaWdpbihzZWxmLmVsZW1lbnRzLnByZXZpZXcpLFxyXG4gICAgICAgICAgICB0b3AgPSAodnBEYXRhLnRvcCAtIGRhdGEudG9wKSArICh2cERhdGEuaGVpZ2h0IC8gMiksXHJcbiAgICAgICAgICAgIGxlZnQgPSAodnBEYXRhLmxlZnQgLSBkYXRhLmxlZnQpICsgKHZwRGF0YS53aWR0aCAvIDIpLFxyXG4gICAgICAgICAgICBjZW50ZXIgPSB7fSxcclxuICAgICAgICAgICAgYWRqID0ge307XHJcblxyXG4gICAgICAgIGNlbnRlci55ID0gdG9wIC8gc2NhbGU7XHJcbiAgICAgICAgY2VudGVyLnggPSBsZWZ0IC8gc2NhbGU7XHJcblxyXG4gICAgICAgIGFkai55ID0gKGNlbnRlci55IC0gcGMueSkgKiAoMSAtIHNjYWxlKTtcclxuICAgICAgICBhZGoueCA9IChjZW50ZXIueCAtIHBjLngpICogKDEgLSBzY2FsZSk7XHJcblxyXG4gICAgICAgIHRyYW5zZm9ybS54IC09IGFkai54O1xyXG4gICAgICAgIHRyYW5zZm9ybS55IC09IGFkai55O1xyXG5cclxuICAgICAgICB2YXIgbmV3Q3NzID0ge307XHJcbiAgICAgICAgbmV3Q3NzW0NTU19UUkFOU19PUkddID0gY2VudGVyLnggKyAncHggJyArIGNlbnRlci55ICsgJ3B4JztcclxuICAgICAgICBuZXdDc3NbQ1NTX1RSQU5TRk9STV0gPSB0cmFuc2Zvcm0udG9TdHJpbmcoKTtcclxuICAgICAgICBjc3Moc2VsZi5lbGVtZW50cy5wcmV2aWV3LCBuZXdDc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9pbml0RHJhZ2dhYmxlKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgaXNEcmFnZ2luZyA9IGZhbHNlLFxyXG4gICAgICAgICAgICBvcmlnaW5hbFgsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsWSxcclxuICAgICAgICAgICAgb3JpZ2luYWxEaXN0YW5jZSxcclxuICAgICAgICAgICAgdnBSZWN0LFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFzc2lnblRyYW5zZm9ybUNvb3JkaW5hdGVzKGRlbHRhWCwgZGVsdGFZKSB7XHJcbiAgICAgICAgICAgIHZhciBpbWdSZWN0ID0gc2VsZi5lbGVtZW50cy5wcmV2aWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICAgICAgdG9wID0gdHJhbnNmb3JtLnkgKyBkZWx0YVksXHJcbiAgICAgICAgICAgICAgICBsZWZ0ID0gdHJhbnNmb3JtLnggKyBkZWx0YVg7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmVuZm9yY2VCb3VuZGFyeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHZwUmVjdC50b3AgPiBpbWdSZWN0LnRvcCArIGRlbHRhWSAmJiB2cFJlY3QuYm90dG9tIDwgaW1nUmVjdC5ib3R0b20gKyBkZWx0YVkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm0ueSA9IHRvcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodnBSZWN0LmxlZnQgPiBpbWdSZWN0LmxlZnQgKyBkZWx0YVggJiYgdnBSZWN0LnJpZ2h0IDwgaW1nUmVjdC5yaWdodCArIGRlbHRhWCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybS54ID0gbGVmdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybS55ID0gdG9wO1xyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtLnggPSBsZWZ0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB0b2dnbGVHcmFiU3RhdGUoaXNEcmFnZ2luZykge1xyXG4gICAgICAgICAgc2VsZi5lbGVtZW50cy5wcmV2aWV3LnNldEF0dHJpYnV0ZSgnYXJpYS1ncmFiYmVkJywgaXNEcmFnZ2luZyk7XHJcbiAgICAgICAgICBzZWxmLmVsZW1lbnRzLmJvdW5kYXJ5LnNldEF0dHJpYnV0ZSgnYXJpYS1kcm9wZWZmZWN0JywgaXNEcmFnZ2luZz8gJ21vdmUnOiAnbm9uZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24ga2V5RG93bihldikge1xyXG4gICAgICAgICAgICB2YXIgTEVGVF9BUlJPVyAgPSAzNyxcclxuICAgICAgICAgICAgICAgIFVQX0FSUk9XICAgID0gMzgsXHJcbiAgICAgICAgICAgICAgICBSSUdIVF9BUlJPVyA9IDM5LFxyXG4gICAgICAgICAgICAgICAgRE9XTl9BUlJPVyAgPSA0MDtcclxuXHJcbiAgICAgICAgICAgIGlmIChldi5zaGlmdEtleSAmJiAoZXYua2V5Q29kZSA9PSBVUF9BUlJPVyB8fCBldi5rZXlDb2RlID09IERPV05fQVJST1cpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgem9vbSA9IDAuMDtcclxuICAgICAgICAgICAgICAgIGlmIChldi5rZXlDb2RlID09IFVQX0FSUk9XKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgem9vbSA9IHBhcnNlRmxvYXQoc2VsZi5lbGVtZW50cy56b29tZXIudmFsdWUsIDEwKSArIHBhcnNlRmxvYXQoc2VsZi5lbGVtZW50cy56b29tZXIuc3RlcCwgMTApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB6b29tID0gcGFyc2VGbG9hdChzZWxmLmVsZW1lbnRzLnpvb21lci52YWx1ZSwgMTApIC0gcGFyc2VGbG9hdChzZWxmLmVsZW1lbnRzLnpvb21lci5zdGVwLCAxMClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYuc2V0Wm9vbSh6b29tKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZWxmLm9wdGlvbnMuZW5hYmxlS2V5TW92ZW1lbnQgJiYgKGV2LmtleUNvZGUgPj0gMzcgJiYgZXYua2V5Q29kZSA8PSA0MCkpIHtcclxuICAgICAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbW92ZW1lbnQgPSBwYXJzZUtleURvd24oZXYua2V5Q29kZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtID0gVHJhbnNmb3JtLnBhcnNlKHNlbGYuZWxlbWVudHMucHJldmlldyk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlW0NTU19VU0VSU0VMRUNUXSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIHZwUmVjdCA9IHNlbGYuZWxlbWVudHMudmlld3BvcnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBrZXlNb3ZlKG1vdmVtZW50KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlS2V5RG93bihrZXkpIHtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBMRUZUX0FSUk9XOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzEsIDBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgVVBfQVJST1c6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMCwgMV07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBSSUdIVF9BUlJPVzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFstMSwgMF07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBET1dOX0FSUk9XOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzAsIC0xXTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBrZXlNb3ZlKG1vdmVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBkZWx0YVggPSBtb3ZlbWVudFswXSxcclxuICAgICAgICAgICAgICAgIGRlbHRhWSA9IG1vdmVtZW50WzFdLFxyXG4gICAgICAgICAgICAgICAgbmV3Q3NzID0ge307XHJcblxyXG4gICAgICAgICAgICBhc3NpZ25UcmFuc2Zvcm1Db29yZGluYXRlcyhkZWx0YVgsIGRlbHRhWSk7XHJcblxyXG4gICAgICAgICAgICBuZXdDc3NbQ1NTX1RSQU5TRk9STV0gPSB0cmFuc2Zvcm0udG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgY3NzKHNlbGYuZWxlbWVudHMucHJldmlldywgbmV3Q3NzKTtcclxuICAgICAgICAgICAgX3VwZGF0ZU92ZXJsYXkuY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZVtDU1NfVVNFUlNFTEVDVF0gPSAnJztcclxuICAgICAgICAgICAgX3VwZGF0ZUNlbnRlclBvaW50LmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIF90cmlnZ2VyVXBkYXRlLmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbW91c2VEb3duKGV2KSB7XHJcbiAgICAgICAgICAgIGlmIChldi5idXR0b24gIT09IHVuZGVmaW5lZCAmJiBldi5idXR0b24gIT09IDApIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIGV2LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGlmIChpc0RyYWdnaW5nKSByZXR1cm47XHJcbiAgICAgICAgICAgIGlzRHJhZ2dpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICBvcmlnaW5hbFggPSBldi5wYWdlWDtcclxuICAgICAgICAgICAgb3JpZ2luYWxZID0gZXYucGFnZVk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZXYudG91Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoZXMgPSBldi50b3VjaGVzWzBdO1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxYID0gdG91Y2hlcy5wYWdlWDtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsWSA9IHRvdWNoZXMucGFnZVk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdG9nZ2xlR3JhYlN0YXRlKGlzRHJhZ2dpbmcpO1xyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBUcmFuc2Zvcm0ucGFyc2Uoc2VsZi5lbGVtZW50cy5wcmV2aWV3KTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlTW92ZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBtb3VzZU1vdmUpO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXApO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBtb3VzZVVwKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZVtDU1NfVVNFUlNFTEVDVF0gPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHZwUmVjdCA9IHNlbGYuZWxlbWVudHMudmlld3BvcnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBtb3VzZU1vdmUoZXYpIHtcclxuICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHBhZ2VYID0gZXYucGFnZVgsXHJcbiAgICAgICAgICAgICAgICBwYWdlWSA9IGV2LnBhZ2VZO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV2LnRvdWNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0b3VjaGVzID0gZXYudG91Y2hlc1swXTtcclxuICAgICAgICAgICAgICAgIHBhZ2VYID0gdG91Y2hlcy5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHBhZ2VZID0gdG91Y2hlcy5wYWdlWTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRlbHRhWCA9IHBhZ2VYIC0gb3JpZ2luYWxYLFxyXG4gICAgICAgICAgICAgICAgZGVsdGFZID0gcGFnZVkgLSBvcmlnaW5hbFksXHJcbiAgICAgICAgICAgICAgICBuZXdDc3MgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmIChldi50eXBlID09ICd0b3VjaG1vdmUnKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXYudG91Y2hlcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoMSA9IGV2LnRvdWNoZXNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRvdWNoMiA9IGV2LnRvdWNoZXNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRpc3QgPSBNYXRoLnNxcnQoKHRvdWNoMS5wYWdlWCAtIHRvdWNoMi5wYWdlWCkgKiAodG91Y2gxLnBhZ2VYIC0gdG91Y2gyLnBhZ2VYKSArICh0b3VjaDEucGFnZVkgLSB0b3VjaDIucGFnZVkpICogKHRvdWNoMS5wYWdlWSAtIHRvdWNoMi5wYWdlWSkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW9yaWdpbmFsRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxEaXN0YW5jZSA9IGRpc3QgLyBzZWxmLl9jdXJyZW50Wm9vbTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IGRpc3QgLyBvcmlnaW5hbERpc3RhbmNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfc2V0Wm9vbWVyVmFsLmNhbGwoc2VsZiwgc2NhbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BhdGNoQ2hhbmdlKHNlbGYuZWxlbWVudHMuem9vbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGFzc2lnblRyYW5zZm9ybUNvb3JkaW5hdGVzKGRlbHRhWCwgZGVsdGFZKTtcclxuXHJcbiAgICAgICAgICAgIG5ld0Nzc1tDU1NfVFJBTlNGT1JNXSA9IHRyYW5zZm9ybS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICBjc3Moc2VsZi5lbGVtZW50cy5wcmV2aWV3LCBuZXdDc3MpO1xyXG4gICAgICAgICAgICBfdXBkYXRlT3ZlcmxheS5jYWxsKHNlbGYpO1xyXG4gICAgICAgICAgICBvcmlnaW5hbFkgPSBwYWdlWTtcclxuICAgICAgICAgICAgb3JpZ2luYWxYID0gcGFnZVg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBtb3VzZVVwKCkge1xyXG4gICAgICAgICAgICBpc0RyYWdnaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRvZ2dsZUdyYWJTdGF0ZShpc0RyYWdnaW5nKTtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIG1vdXNlTW92ZSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBtb3VzZU1vdmUpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIG1vdXNlVXApO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBtb3VzZVVwKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZVtDU1NfVVNFUlNFTEVDVF0gPSAnJztcclxuICAgICAgICAgICAgX3VwZGF0ZUNlbnRlclBvaW50LmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIF90cmlnZ2VyVXBkYXRlLmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2VsZi5lbGVtZW50cy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIG1vdXNlRG93bik7XHJcbiAgICAgICAgc2VsZi5lbGVtZW50cy52aWV3cG9ydC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywga2V5RG93bik7XHJcbiAgICAgICAgc2VsZi5lbGVtZW50cy5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBtb3VzZURvd24pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF91cGRhdGVPdmVybGF5KCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgYm91bmRSZWN0ID0gc2VsZi5lbGVtZW50cy5ib3VuZGFyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgaW1nRGF0YSA9IHNlbGYuZWxlbWVudHMucHJldmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgY3NzKHNlbGYuZWxlbWVudHMub3ZlcmxheSwge1xyXG4gICAgICAgICAgICB3aWR0aDogaW1nRGF0YS53aWR0aCArICdweCcsXHJcbiAgICAgICAgICAgIGhlaWdodDogaW1nRGF0YS5oZWlnaHQgKyAncHgnLFxyXG4gICAgICAgICAgICB0b3A6IChpbWdEYXRhLnRvcCAtIGJvdW5kUmVjdC50b3ApICsgJ3B4JyxcclxuICAgICAgICAgICAgbGVmdDogKGltZ0RhdGEubGVmdCAtIGJvdW5kUmVjdC5sZWZ0KSArICdweCdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHZhciBfZGVib3VuY2VkT3ZlcmxheSA9IGRlYm91bmNlKF91cGRhdGVPdmVybGF5LCA1MDApO1xyXG5cclxuICAgIGZ1bmN0aW9uIF90cmlnZ2VyVXBkYXRlKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgZGF0YSA9IHNlbGYuZ2V0KCksXHJcbiAgICAgICAgICAgIGV2O1xyXG5cclxuICAgICAgICBpZiAoIV9pc1Zpc2libGUuY2FsbChzZWxmKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZWxmLm9wdGlvbnMudXBkYXRlLmNhbGwoc2VsZiwgZGF0YSk7XHJcbiAgICAgICAgaWYgKHNlbGYuJCAmJiB0eXBlb2YgUHJvdG90eXBlID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuJChzZWxmLmVsZW1lbnQpLnRyaWdnZXIoJ3VwZGF0ZScsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGV2O1xyXG4gICAgICAgICAgICBpZiAod2luZG93LkN1c3RvbUV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBldiA9IG5ldyBDdXN0b21FdmVudCgndXBkYXRlJywgeyBkZXRhaWw6IGRhdGEgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBldiA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdDdXN0b21FdmVudCcpO1xyXG4gICAgICAgICAgICAgICAgZXYuaW5pdEN1c3RvbUV2ZW50KCd1cGRhdGUnLCB0cnVlLCB0cnVlLCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VsZi5lbGVtZW50LmRpc3BhdGNoRXZlbnQoZXYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfaXNWaXNpYmxlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRzLnByZXZpZXcub2Zmc2V0SGVpZ2h0ID4gMCAmJiB0aGlzLmVsZW1lbnRzLnByZXZpZXcub2Zmc2V0V2lkdGggPiAwO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF91cGRhdGVQcm9wZXJ0aWVzRnJvbUltYWdlKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgaW5pdGlhbFpvb20gPSAxLFxyXG4gICAgICAgICAgICBjc3NSZXNldCA9IHt9LFxyXG4gICAgICAgICAgICBpbWcgPSBzZWxmLmVsZW1lbnRzLnByZXZpZXcsXHJcbiAgICAgICAgICAgIGltZ0RhdGEgPSBzZWxmLmVsZW1lbnRzLnByZXZpZXcuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgIHRyYW5zZm9ybVJlc2V0ID0gbmV3IFRyYW5zZm9ybSgwLCAwLCBpbml0aWFsWm9vbSksXHJcbiAgICAgICAgICAgIG9yaWdpblJlc2V0ID0gbmV3IFRyYW5zZm9ybU9yaWdpbigpLFxyXG4gICAgICAgICAgICBpc1Zpc2libGUgPSBfaXNWaXNpYmxlLmNhbGwoc2VsZik7XHJcblxyXG4gICAgICAgIGlmICghaXNWaXNpYmxlIHx8IHNlbGYuZGF0YS5ib3VuZCkge1xyXG4gICAgICAgICAgICAvLyBpZiB0aGUgY3JvcHBpZSBpc24ndCB2aXNpYmxlIG9yIGl0IGRvZXNuJ3QgbmVlZCBiaW5kaW5nXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYuZGF0YS5ib3VuZCA9IHRydWU7XHJcbiAgICAgICAgY3NzUmVzZXRbQ1NTX1RSQU5TRk9STV0gPSB0cmFuc2Zvcm1SZXNldC50b1N0cmluZygpO1xyXG4gICAgICAgIGNzc1Jlc2V0W0NTU19UUkFOU19PUkddID0gb3JpZ2luUmVzZXQudG9TdHJpbmcoKTtcclxuICAgICAgICBjc3NSZXNldFsnb3BhY2l0eSddID0gMTtcclxuICAgICAgICBjc3MoaW1nLCBjc3NSZXNldCk7XHJcblxyXG4gICAgICAgIHNlbGYuX29yaWdpbmFsSW1hZ2VXaWR0aCA9IGltZ0RhdGEud2lkdGg7XHJcbiAgICAgICAgc2VsZi5fb3JpZ2luYWxJbWFnZUhlaWdodCA9IGltZ0RhdGEuaGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmVuYWJsZVpvb20pIHtcclxuICAgICAgICAgICAgX3VwZGF0ZVpvb21MaW1pdHMuY2FsbChzZWxmLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHNlbGYuX2N1cnJlbnRab29tID0gaW5pdGlhbFpvb207XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cmFuc2Zvcm1SZXNldC5zY2FsZSA9IHNlbGYuX2N1cnJlbnRab29tO1xyXG4gICAgICAgIGNzc1Jlc2V0W0NTU19UUkFOU0ZPUk1dID0gdHJhbnNmb3JtUmVzZXQudG9TdHJpbmcoKTtcclxuICAgICAgICBjc3MoaW1nLCBjc3NSZXNldCk7XHJcblxyXG4gICAgICAgIGlmIChzZWxmLmRhdGEucG9pbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBfYmluZFBvaW50cy5jYWxsKHNlbGYsIHNlbGYuZGF0YS5wb2ludHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2NlbnRlckltYWdlLmNhbGwoc2VsZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfdXBkYXRlQ2VudGVyUG9pbnQuY2FsbChzZWxmKTtcclxuICAgICAgICBfdXBkYXRlT3ZlcmxheS5jYWxsKHNlbGYpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF91cGRhdGVab29tTGltaXRzIChpbml0aWFsKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBtaW5ab29tID0gMCxcclxuICAgICAgICAgICAgbWF4Wm9vbSA9IDEuNSxcclxuICAgICAgICAgICAgaW5pdGlhbFpvb20sXHJcbiAgICAgICAgICAgIGRlZmF1bHRJbml0aWFsWm9vbSxcclxuICAgICAgICAgICAgem9vbWVyID0gc2VsZi5lbGVtZW50cy56b29tZXIsXHJcbiAgICAgICAgICAgIHNjYWxlID0gcGFyc2VGbG9hdCh6b29tZXIudmFsdWUpLFxyXG4gICAgICAgICAgICBib3VuZGFyeURhdGEgPSBzZWxmLmVsZW1lbnRzLmJvdW5kYXJ5LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICBpbWdEYXRhID0gc2VsZi5lbGVtZW50cy5wcmV2aWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICB2cERhdGEgPSBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICBtaW5XLFxyXG4gICAgICAgICAgICBtaW5IO1xyXG5cclxuICAgICAgICBpZiAoc2VsZi5vcHRpb25zLmVuZm9yY2VCb3VuZGFyeSkge1xyXG4gICAgICAgICAgICBtaW5XID0gdnBEYXRhLndpZHRoIC8gKGluaXRpYWwgPyBpbWdEYXRhLndpZHRoIDogaW1nRGF0YS53aWR0aCAvIHNjYWxlKTtcclxuICAgICAgICAgICAgbWluSCA9IHZwRGF0YS5oZWlnaHQgLyAoaW5pdGlhbCA/IGltZ0RhdGEuaGVpZ2h0IDogaW1nRGF0YS5oZWlnaHQgLyBzY2FsZSk7XHJcbiAgICAgICAgICAgIG1pblpvb20gPSBNYXRoLm1heChtaW5XLCBtaW5IKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChtaW5ab29tID49IG1heFpvb20pIHtcclxuICAgICAgICAgICAgbWF4Wm9vbSA9IG1pblpvb20gKyAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgem9vbWVyLm1pbiA9IGZpeChtaW5ab29tLCA0KTtcclxuICAgICAgICB6b29tZXIubWF4ID0gZml4KG1heFpvb20sIDQpO1xyXG5cclxuICAgICAgICBpZiAoaW5pdGlhbCkge1xyXG4gICAgICAgICAgICBkZWZhdWx0SW5pdGlhbFpvb20gPSBNYXRoLm1heCgoYm91bmRhcnlEYXRhLndpZHRoIC8gaW1nRGF0YS53aWR0aCksIChib3VuZGFyeURhdGEuaGVpZ2h0IC8gaW1nRGF0YS5oZWlnaHQpKTtcclxuICAgICAgICAgICAgaW5pdGlhbFpvb20gPSBzZWxmLmRhdGEuYm91bmRab29tICE9PSBudWxsID8gc2VsZi5kYXRhLmJvdW5kWm9vbSA6IGRlZmF1bHRJbml0aWFsWm9vbTtcclxuICAgICAgICAgICAgX3NldFpvb21lclZhbC5jYWxsKHNlbGYsIGluaXRpYWxab29tKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGRpc3BhdGNoQ2hhbmdlKHpvb21lcik7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2JpbmRQb2ludHMocG9pbnRzKSB7XHJcbiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggIT0gNCkge1xyXG4gICAgICAgICAgICB0aHJvdyBcIkNyb3BwaWUgLSBJbnZhbGlkIG51bWJlciBvZiBwb2ludHMgc3VwcGxpZWQ6IFwiICsgcG9pbnRzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIHBvaW50c1dpZHRoID0gcG9pbnRzWzJdIC0gcG9pbnRzWzBdLFxyXG4gICAgICAgICAgICAvLyBwb2ludHNIZWlnaHQgPSBwb2ludHNbM10gLSBwb2ludHNbMV0sXHJcbiAgICAgICAgICAgIHZwRGF0YSA9IHNlbGYuZWxlbWVudHMudmlld3BvcnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgIGJvdW5kUmVjdCA9IHNlbGYuZWxlbWVudHMuYm91bmRhcnkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgIHZwT2Zmc2V0ID0ge1xyXG4gICAgICAgICAgICAgICAgbGVmdDogdnBEYXRhLmxlZnQgLSBib3VuZFJlY3QubGVmdCxcclxuICAgICAgICAgICAgICAgIHRvcDogdnBEYXRhLnRvcCAtIGJvdW5kUmVjdC50b3BcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2NhbGUgPSB2cERhdGEud2lkdGggLyBwb2ludHNXaWR0aCxcclxuICAgICAgICAgICAgb3JpZ2luVG9wID0gcG9pbnRzWzFdLFxyXG4gICAgICAgICAgICBvcmlnaW5MZWZ0ID0gcG9pbnRzWzBdLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1Ub3AgPSAoLTEgKiBwb2ludHNbMV0pICsgdnBPZmZzZXQudG9wLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm1MZWZ0ID0gKC0xICogcG9pbnRzWzBdKSArIHZwT2Zmc2V0LmxlZnQsXHJcbiAgICAgICAgICAgIG5ld0NzcyA9IHt9O1xyXG5cclxuICAgICAgICBuZXdDc3NbQ1NTX1RSQU5TX09SR10gPSBvcmlnaW5MZWZ0ICsgJ3B4ICcgKyBvcmlnaW5Ub3AgKyAncHgnO1xyXG4gICAgICAgIG5ld0Nzc1tDU1NfVFJBTlNGT1JNXSA9IG5ldyBUcmFuc2Zvcm0odHJhbnNmb3JtTGVmdCwgdHJhbnNmb3JtVG9wLCBzY2FsZSkudG9TdHJpbmcoKTtcclxuICAgICAgICBjc3Moc2VsZi5lbGVtZW50cy5wcmV2aWV3LCBuZXdDc3MpO1xyXG5cclxuICAgICAgICBfc2V0Wm9vbWVyVmFsLmNhbGwoc2VsZiwgc2NhbGUpO1xyXG4gICAgICAgIHNlbGYuX2N1cnJlbnRab29tID0gc2NhbGU7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2NlbnRlckltYWdlKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgaW1nRGltID0gc2VsZi5lbGVtZW50cy5wcmV2aWV3LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICB2cERpbSA9IHNlbGYuZWxlbWVudHMudmlld3BvcnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksXHJcbiAgICAgICAgICAgIGJvdW5kRGltID0gc2VsZi5lbGVtZW50cy5ib3VuZGFyeS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgdnBMZWZ0ID0gdnBEaW0ubGVmdCAtIGJvdW5kRGltLmxlZnQsXHJcbiAgICAgICAgICAgIHZwVG9wID0gdnBEaW0udG9wIC0gYm91bmREaW0udG9wLFxyXG4gICAgICAgICAgICB3ID0gdnBMZWZ0IC0gKChpbWdEaW0ud2lkdGggLSB2cERpbS53aWR0aCkgLyAyKSxcclxuICAgICAgICAgICAgaCA9IHZwVG9wIC0gKChpbWdEaW0uaGVpZ2h0IC0gdnBEaW0uaGVpZ2h0KSAvIDIpLFxyXG4gICAgICAgICAgICB0cmFuc2Zvcm0gPSBuZXcgVHJhbnNmb3JtKHcsIGgsIHNlbGYuX2N1cnJlbnRab29tKTtcclxuXHJcbiAgICAgICAgY3NzKHNlbGYuZWxlbWVudHMucHJldmlldywgQ1NTX1RSQU5TRk9STSwgdHJhbnNmb3JtLnRvU3RyaW5nKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF90cmFuc2ZlckltYWdlVG9DYW52YXMoY3VzdG9tT3JpZW50YXRpb24pIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIGNhbnZhcyA9IHNlbGYuZWxlbWVudHMuY2FudmFzLFxyXG4gICAgICAgICAgICBpbWcgPSBzZWxmLmVsZW1lbnRzLmltZyxcclxuICAgICAgICAgICAgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyksXHJcbiAgICAgICAgICAgIGV4aWYgPSBfaGFzRXhpZi5jYWxsKHNlbGYpLFxyXG4gICAgICAgICAgICBjdXN0b21PcmllbnRhdGlvbiA9IHNlbGYub3B0aW9ucy5lbmFibGVPcmllbnRhdGlvbiAmJiBjdXN0b21PcmllbnRhdGlvbjtcclxuXHJcbiAgICAgICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xyXG4gICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKGV4aWYgJiYgIWN1c3RvbU9yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbiA9IGdldEV4aWZPcmllbnRhdGlvbihpbWcpO1xyXG4gICAgICAgICAgICBkcmF3Q2FudmFzKGNhbnZhcywgaW1nLCBudW0ob3JpZW50YXRpb24gfHwgMCwgMTApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY3VzdG9tT3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgZHJhd0NhbnZhcyhjYW52YXMsIGltZywgY3VzdG9tT3JpZW50YXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfZ2V0Q2FudmFzKGRhdGEpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIHBvaW50cyA9IGRhdGEucG9pbnRzLFxyXG4gICAgICAgICAgICBsZWZ0ID0gbnVtKHBvaW50c1swXSksXHJcbiAgICAgICAgICAgIHRvcCA9IG51bShwb2ludHNbMV0pLFxyXG4gICAgICAgICAgICByaWdodCA9IG51bShwb2ludHNbMl0pLFxyXG4gICAgICAgICAgICBib3R0b20gPSBudW0ocG9pbnRzWzNdKSxcclxuICAgICAgICAgICAgd2lkdGggPSByaWdodC1sZWZ0LFxyXG4gICAgICAgICAgICBoZWlnaHQgPSBib3R0b20tdG9wLFxyXG4gICAgICAgICAgICBjaXJjbGUgPSBkYXRhLmNpcmNsZSxcclxuICAgICAgICAgICAgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXHJcbiAgICAgICAgICAgIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpLFxyXG4gICAgICAgICAgICBvdXRXaWR0aCA9IHdpZHRoLFxyXG4gICAgICAgICAgICBvdXRIZWlnaHQgPSBoZWlnaHQsXHJcbiAgICAgICAgICAgIHN0YXJ0WCA9IDAsXHJcbiAgICAgICAgICAgIHN0YXJ0WSA9IDAsXHJcbiAgICAgICAgICAgIGNhbnZhc1dpZHRoID0gb3V0V2lkdGgsXHJcbiAgICAgICAgICAgIGNhbnZhc0hlaWdodCA9IG91dEhlaWdodCxcclxuICAgICAgICAgICAgY3VzdG9tRGltZW5zaW9ucyA9IChkYXRhLm91dHB1dFdpZHRoICYmIGRhdGEub3V0cHV0SGVpZ2h0KSxcclxuICAgICAgICAgICAgb3V0cHV0UmF0aW8gPSAxO1xyXG5cclxuICAgICAgICBpZiAoY3VzdG9tRGltZW5zaW9ucykge1xyXG4gICAgICAgICAgICBjYW52YXNXaWR0aCA9IGRhdGEub3V0cHV0V2lkdGg7XHJcbiAgICAgICAgICAgIGNhbnZhc0hlaWdodCA9IGRhdGEub3V0cHV0SGVpZ2h0O1xyXG4gICAgICAgICAgICBvdXRwdXRSYXRpbyA9IGNhbnZhc1dpZHRoIC8gb3V0V2lkdGg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXNXaWR0aDtcclxuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gY2FudmFzSGVpZ2h0O1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5iYWNrZ3JvdW5kQ29sb3IpIHtcclxuICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGRhdGEuYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgb3V0V2lkdGgsIG91dEhlaWdodCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBzdGFydCBmaXhpbmcgZGF0YSB0byBzZW5kIHRvIGRyYXcgaW1hZ2UgZm9yIGVuZm9yY2VCb3VuZGFyeTogZmFsc2VcclxuICAgICAgICBpZiAoIXNlbGYub3B0aW9ucy5lbmZvcmNlQm91bmRhcnkpIHtcclxuICAgICAgICAgICAgaWYgKGxlZnQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFggPSBNYXRoLmFicyhsZWZ0KTtcclxuICAgICAgICAgICAgICAgIGxlZnQgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0b3AgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydFkgPSBNYXRoLmFicyh0b3ApO1xyXG4gICAgICAgICAgICAgICAgdG9wID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmlnaHQgPiBzZWxmLl9vcmlnaW5hbEltYWdlV2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHdpZHRoID0gc2VsZi5fb3JpZ2luYWxJbWFnZVdpZHRoIC0gbGVmdDtcclxuICAgICAgICAgICAgICAgIG91dFdpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJvdHRvbSA+IHNlbGYuX29yaWdpbmFsSW1hZ2VIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IHNlbGYuX29yaWdpbmFsSW1hZ2VIZWlnaHQgLSB0b3A7XHJcbiAgICAgICAgICAgICAgICBvdXRIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvdXRwdXRSYXRpbyAhPT0gMSkge1xyXG4gICAgICAgICAgICBzdGFydFggKj0gb3V0cHV0UmF0aW87XHJcbiAgICAgICAgICAgIHN0YXJ0WSAqPSBvdXRwdXRSYXRpbztcclxuICAgICAgICAgICAgb3V0V2lkdGggKj0gb3V0cHV0UmF0aW87XHJcbiAgICAgICAgICAgIG91dEhlaWdodCAqPSBvdXRwdXRSYXRpbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN0eC5kcmF3SW1hZ2UodGhpcy5lbGVtZW50cy5wcmV2aWV3LCBsZWZ0LCB0b3AsIE1hdGgubWluKHdpZHRoLCBzZWxmLl9vcmlnaW5hbEltYWdlV2lkdGgpLCBNYXRoLm1pbihoZWlnaHQsIHNlbGYuX29yaWdpbmFsSW1hZ2VIZWlnaHQpLCBzdGFydFgsIHN0YXJ0WSwgb3V0V2lkdGgsIG91dEhlaWdodCk7XHJcbiAgICAgICAgaWYgKGNpcmNsZSkge1xyXG4gICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gJyNmZmYnO1xyXG4gICAgICAgICAgICBjdHguZ2xvYmFsQ29tcG9zaXRlT3BlcmF0aW9uID0gJ2Rlc3RpbmF0aW9uLWluJztcclxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBjdHguYXJjKG91dFdpZHRoIC8gMiwgb3V0SGVpZ2h0IC8gMiwgb3V0V2lkdGggLyAyLCAwLCBNYXRoLlBJICogMiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIGN0eC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgY3R4LmZpbGwoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNhbnZhcztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfZ2V0SHRtbFJlc3VsdChkYXRhKSB7XHJcbiAgICAgICAgdmFyIHBvaW50cyA9IGRhdGEucG9pbnRzLFxyXG4gICAgICAgICAgICBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyksXHJcbiAgICAgICAgICAgIHdpZHRoID0gcG9pbnRzWzJdIC0gcG9pbnRzWzBdLFxyXG4gICAgICAgICAgICBoZWlnaHQgPSBwb2ludHNbM10gLSBwb2ludHNbMV07XHJcblxyXG4gICAgICAgIGFkZENsYXNzKGRpdiwgJ2Nyb3BwaWUtcmVzdWx0Jyk7XHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKGltZyk7XHJcbiAgICAgICAgY3NzKGltZywge1xyXG4gICAgICAgICAgICBsZWZ0OiAoLTEgKiBwb2ludHNbMF0pICsgJ3B4JyxcclxuICAgICAgICAgICAgdG9wOiAoLTEgKiBwb2ludHNbMV0pICsgJ3B4J1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGltZy5zcmMgPSBkYXRhLnVybDtcclxuICAgICAgICBjc3MoZGl2LCB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCArICdweCcsXHJcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0ICsgJ3B4J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gZGl2O1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9nZXRCYXNlNjRSZXN1bHQoZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBfZ2V0Q2FudmFzLmNhbGwodGhpcywgZGF0YSkudG9EYXRhVVJMKGRhdGEuZm9ybWF0LCBkYXRhLnF1YWxpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIF9nZXRCbG9iUmVzdWx0KGRhdGEpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgX2dldENhbnZhcy5jYWxsKHNlbGYsIGRhdGEpLnRvQmxvYihmdW5jdGlvbiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShibG9iKTtcclxuICAgICAgICAgICAgfSwgZGF0YS5mb3JtYXQsIGRhdGEucXVhbGl0eSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2JpbmQob3B0aW9ucywgY2IpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIHVybCxcclxuICAgICAgICAgICAgcG9pbnRzID0gW10sXHJcbiAgICAgICAgICAgIHpvb20gPSBudWxsLFxyXG4gICAgICAgICAgICBoYXNFeGlmID0gX2hhc0V4aWYuY2FsbChzZWxmKTs7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgKG9wdGlvbnMpID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICB1cmwgPSBvcHRpb25zO1xyXG4gICAgICAgICAgICBvcHRpb25zID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9ucykpIHtcclxuICAgICAgICAgICAgcG9pbnRzID0gb3B0aW9ucy5zbGljZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgKG9wdGlvbnMpID09ICd1bmRlZmluZWQnICYmIHNlbGYuZGF0YS51cmwpIHsgLy9yZWZyZXNoaW5nXHJcbiAgICAgICAgICAgIF91cGRhdGVQcm9wZXJ0aWVzRnJvbUltYWdlLmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIF90cmlnZ2VyVXBkYXRlLmNhbGwoc2VsZik7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgICAgICAgICAgIHBvaW50cyA9IG9wdGlvbnMucG9pbnRzIHx8IFtdO1xyXG4gICAgICAgICAgICB6b29tID0gdHlwZW9mKG9wdGlvbnMuem9vbSkgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IG9wdGlvbnMuem9vbTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNlbGYuZGF0YS5ib3VuZCA9IGZhbHNlO1xyXG4gICAgICAgIHNlbGYuZGF0YS51cmwgPSB1cmwgfHwgc2VsZi5kYXRhLnVybDtcclxuICAgICAgICBzZWxmLmRhdGEuYm91bmRab29tID0gem9vbTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGxvYWRJbWFnZSh1cmwsIHNlbGYuZWxlbWVudHMuaW1nLCBoYXNFeGlmKS50aGVuKGZ1bmN0aW9uIChpbWcpIHtcclxuICAgICAgICAgICAgaWYgKCFwb2ludHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmF0RGltID0gbmF0dXJhbEltYWdlRGltZW5zaW9ucyhpbWcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlY3QgPSBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGFzcGVjdFJhdGlvID0gcmVjdC53aWR0aCAvIHJlY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdmFyIGltZ0FzcGVjdFJhdGlvID0gbmF0RGltLndpZHRoIC8gbmF0RGltLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIHZhciB3aWR0aCwgaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbWdBc3BlY3RSYXRpbyA+IGFzcGVjdFJhdGlvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gbmF0RGltLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aCA9IGhlaWdodCAqIGFzcGVjdFJhdGlvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGggPSBuYXREaW0ud2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gd2lkdGggLyBhc3BlY3RSYXRpbztcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgeDAgPSAobmF0RGltLndpZHRoIC0gd2lkdGgpIC8gMjtcclxuICAgICAgICAgICAgICAgIHZhciB5MCA9IChuYXREaW0uaGVpZ2h0IC0gaGVpZ2h0KSAvIDI7XHJcbiAgICAgICAgICAgICAgICB2YXIgeDEgPSB4MCArIHdpZHRoO1xyXG4gICAgICAgICAgICAgICAgdmFyIHkxID0geTAgKyBoZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZi5kYXRhLnBvaW50cyA9IFt4MCwgeTAsIHgxLCB5MV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VsZi5vcHRpb25zLnJlbGF0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICBwb2ludHMgPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRzWzBdICogaW1nLm5hdHVyYWxXaWR0aCAvIDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHNbMV0gKiBpbWcubmF0dXJhbEhlaWdodCAvIDEwMCxcclxuICAgICAgICAgICAgICAgICAgICBwb2ludHNbMl0gKiBpbWcubmF0dXJhbFdpZHRoIC8gMTAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50c1szXSAqIGltZy5uYXR1cmFsSGVpZ2h0IC8gMTAwXHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZWxmLmRhdGEucG9pbnRzID0gcG9pbnRzLm1hcChmdW5jdGlvbiAocCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQocCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5vcHRpb25zLnVzZUNhbnZhcykge1xyXG4gICAgICAgICAgICAgICAgX3RyYW5zZmVySW1hZ2VUb0NhbnZhcy5jYWxsKHNlbGYsIG9wdGlvbnMub3JpZW50YXRpb24gfHwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX3VwZGF0ZVByb3BlcnRpZXNGcm9tSW1hZ2UuY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgX3RyaWdnZXJVcGRhdGUuY2FsbChzZWxmKTtcclxuICAgICAgICAgICAgY2IgJiYgY2IoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBmaXgodiwgZGVjaW1hbFBvaW50cykge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUZsb2F0KHYpLnRvRml4ZWQoZGVjaW1hbFBvaW50cyB8fCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfZ2V0KCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgaW1nRGF0YSA9IHNlbGYuZWxlbWVudHMucHJldmlldy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgdnBEYXRhID0gc2VsZi5lbGVtZW50cy52aWV3cG9ydC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxcclxuICAgICAgICAgICAgeDEgPSB2cERhdGEubGVmdCAtIGltZ0RhdGEubGVmdCxcclxuICAgICAgICAgICAgeTEgPSB2cERhdGEudG9wIC0gaW1nRGF0YS50b3AsXHJcbiAgICAgICAgICAgIHdpZHRoRGlmZiA9ICh2cERhdGEud2lkdGggLSBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0Lm9mZnNldFdpZHRoKSAvIDIsIC8vYm9yZGVyXHJcbiAgICAgICAgICAgIGhlaWdodERpZmYgPSAodnBEYXRhLmhlaWdodCAtIHNlbGYuZWxlbWVudHMudmlld3BvcnQub2Zmc2V0SGVpZ2h0KSAvIDIsXHJcbiAgICAgICAgICAgIHgyID0geDEgKyBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0Lm9mZnNldFdpZHRoICsgd2lkdGhEaWZmLFxyXG4gICAgICAgICAgICB5MiA9IHkxICsgc2VsZi5lbGVtZW50cy52aWV3cG9ydC5vZmZzZXRIZWlnaHQgKyBoZWlnaHREaWZmLFxyXG4gICAgICAgICAgICBzY2FsZSA9IHNlbGYuX2N1cnJlbnRab29tO1xyXG5cclxuICAgICAgICBpZiAoc2NhbGUgPT09IEluZmluaXR5IHx8IGlzTmFOKHNjYWxlKSkge1xyXG4gICAgICAgICAgICBzY2FsZSA9IDE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWF4ID0gc2VsZi5vcHRpb25zLmVuZm9yY2VCb3VuZGFyeSA/IDAgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XHJcbiAgICAgICAgeDEgPSBNYXRoLm1heChtYXgsIHgxIC8gc2NhbGUpO1xyXG4gICAgICAgIHkxID0gTWF0aC5tYXgobWF4LCB5MSAvIHNjYWxlKTtcclxuICAgICAgICB4MiA9IE1hdGgubWF4KG1heCwgeDIgLyBzY2FsZSk7XHJcbiAgICAgICAgeTIgPSBNYXRoLm1heChtYXgsIHkyIC8gc2NhbGUpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwb2ludHM6IFtmaXgoeDEpLCBmaXgoeTEpLCBmaXgoeDIpLCBmaXgoeTIpXSxcclxuICAgICAgICAgICAgem9vbTogc2NhbGVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBSRVNVTFRfREVGQVVMVFMgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdjYW52YXMnLFxyXG4gICAgICAgICAgICBmb3JtYXQ6ICdwbmcnLFxyXG4gICAgICAgICAgICBxdWFsaXR5OiAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICBSRVNVTFRfRk9STUFUUyA9IFsnanBlZycsICd3ZWJwJywgJ3BuZyddO1xyXG5cclxuICAgIGZ1bmN0aW9uIF9yZXN1bHQob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgZGF0YSA9IF9nZXQuY2FsbChzZWxmKSxcclxuICAgICAgICAgICAgb3B0cyA9IGRlZXBFeHRlbmQoUkVTVUxUX0RFRkFVTFRTLCBkZWVwRXh0ZW5kKHt9LCBvcHRpb25zKSksXHJcbiAgICAgICAgICAgIHJlc3VsdFR5cGUgPSAodHlwZW9mIChvcHRpb25zKSA9PT0gJ3N0cmluZycgPyBvcHRpb25zIDogKG9wdHMudHlwZSB8fCAnYmFzZTY0JykpLFxyXG4gICAgICAgICAgICBzaXplID0gb3B0cy5zaXplIHx8ICd2aWV3cG9ydCcsXHJcbiAgICAgICAgICAgIGZvcm1hdCA9IG9wdHMuZm9ybWF0LFxyXG4gICAgICAgICAgICBxdWFsaXR5ID0gb3B0cy5xdWFsaXR5LFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3IgPSBvcHRzLmJhY2tncm91bmRDb2xvcixcclxuICAgICAgICAgICAgY2lyY2xlID0gdHlwZW9mIG9wdHMuY2lyY2xlID09PSAnYm9vbGVhbicgPyBvcHRzLmNpcmNsZSA6IChzZWxmLm9wdGlvbnMudmlld3BvcnQudHlwZSA9PT0gJ2NpcmNsZScpLFxyXG4gICAgICAgICAgICB2cFJlY3QgPSBzZWxmLmVsZW1lbnRzLnZpZXdwb3J0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICByYXRpbyA9IHZwUmVjdC53aWR0aCAvIHZwUmVjdC5oZWlnaHQsXHJcbiAgICAgICAgICAgIHByb207XHJcblxyXG4gICAgICAgIGlmIChzaXplID09PSAndmlld3BvcnQnKSB7XHJcbiAgICAgICAgICAgIGRhdGEub3V0cHV0V2lkdGggPSB2cFJlY3Qud2lkdGg7XHJcbiAgICAgICAgICAgIGRhdGEub3V0cHV0SGVpZ2h0ID0gdnBSZWN0LmhlaWdodDtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzaXplID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICBpZiAoc2l6ZS53aWR0aCAmJiBzaXplLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgZGF0YS5vdXRwdXRXaWR0aCA9IHNpemUud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBkYXRhLm91dHB1dEhlaWdodCA9IHNpemUuaGVpZ2h0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNpemUud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEub3V0cHV0V2lkdGggPSBzaXplLndpZHRoO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5vdXRwdXRIZWlnaHQgPSBzaXplLndpZHRoIC8gcmF0aW87XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2l6ZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEub3V0cHV0V2lkdGggPSBzaXplLmhlaWdodCAqIHJhdGlvO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5vdXRwdXRIZWlnaHQgPSBzaXplLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKFJFU1VMVF9GT1JNQVRTLmluZGV4T2YoZm9ybWF0KSA+IC0xKSB7XHJcbiAgICAgICAgICAgIGRhdGEuZm9ybWF0ID0gJ2ltYWdlLycgKyBmb3JtYXQ7XHJcbiAgICAgICAgICAgIGRhdGEucXVhbGl0eSA9IHF1YWxpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkYXRhLmNpcmNsZSA9IGNpcmNsZTtcclxuICAgICAgICBkYXRhLnVybCA9IHNlbGYuZGF0YS51cmw7XHJcbiAgICAgICAgZGF0YS5iYWNrZ3JvdW5kQ29sb3IgPSBiYWNrZ3JvdW5kQ29sb3I7XHJcblxyXG4gICAgICAgIHByb20gPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIHN3aXRjaChyZXN1bHRUeXBlLnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Jhd2NhbnZhcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfZ2V0Q2FudmFzLmNhbGwoc2VsZiwgZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2FudmFzJzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Jhc2U2NCc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfZ2V0QmFzZTY0UmVzdWx0LmNhbGwoc2VsZiwgZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnYmxvYic6XHJcbiAgICAgICAgICAgICAgICAgICAgX2dldEJsb2JSZXN1bHQuY2FsbChzZWxmLCBkYXRhKS50aGVuKHJlc29sdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF9nZXRIdG1sUmVzdWx0LmNhbGwoc2VsZiwgZGF0YSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHByb207XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX3JlZnJlc2goKSB7XHJcbiAgICAgICAgX3VwZGF0ZVByb3BlcnRpZXNGcm9tSW1hZ2UuY2FsbCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBfcm90YXRlKGRlZykge1xyXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLnVzZUNhbnZhcykge1xyXG4gICAgICAgICAgICB0aHJvdyAnQ3JvcHBpZTogQ2Fubm90IHJvdGF0ZSB3aXRob3V0IGVuYWJsZU9yaWVudGF0aW9uJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcyxcclxuICAgICAgICAgICAgY2FudmFzID0gc2VsZi5lbGVtZW50cy5jYW52YXMsXHJcbiAgICAgICAgICAgIGNvcHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKSxcclxuICAgICAgICAgICAgb3JudCA9IDE7XHJcblxyXG4gICAgICAgIGNvcHkud2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgY29weS5oZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIHZhciBjdHggPSBjb3B5LmdldENvbnRleHQoJzJkJyk7XHJcbiAgICAgICAgY3R4LmRyYXdJbWFnZShjYW52YXMsIDAsIDApO1xyXG5cclxuICAgICAgICBpZiAoZGVnID09PSA5MCB8fCBkZWcgPT09IC0yNzApIG9ybnQgPSA2O1xyXG4gICAgICAgIGlmIChkZWcgPT09IC05MCB8fCBkZWcgPT09IDI3MCkgb3JudCA9IDg7XHJcbiAgICAgICAgaWYgKGRlZyA9PT0gMTgwIHx8IGRlZyA9PT0gLTE4MCkgb3JudCA9IDM7XHJcblxyXG4gICAgICAgIGRyYXdDYW52YXMoY2FudmFzLCBjb3B5LCBvcm50KTtcclxuICAgICAgICBfb25ab29tLmNhbGwoc2VsZik7XHJcbiAgICAgICAgY29weSA9IG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gX2Rlc3Ryb3koKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYuZWxlbWVudC5yZW1vdmVDaGlsZChzZWxmLmVsZW1lbnRzLmJvdW5kYXJ5KTtcclxuICAgICAgICByZW1vdmVDbGFzcyhzZWxmLmVsZW1lbnQsICdjcm9wcGllLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZW5hYmxlWm9vbSkge1xyXG4gICAgICAgICAgICBzZWxmLmVsZW1lbnQucmVtb3ZlQ2hpbGQoc2VsZi5lbGVtZW50cy56b29tZXJXcmFwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHNlbGYuZWxlbWVudHM7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbmRvdy5qUXVlcnkpIHtcclxuICAgICAgICB2YXIgJCA9IHdpbmRvdy5qUXVlcnk7XHJcbiAgICAgICAgJC5mbi5jcm9wcGllID0gZnVuY3Rpb24gKG9wdHMpIHtcclxuICAgICAgICAgICAgdmFyIG90ID0gdHlwZW9mIG9wdHM7XHJcblxyXG4gICAgICAgICAgICBpZiAob3QgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2luZ2xlSW5zdCA9ICQodGhpcykuZGF0YSgnY3JvcHBpZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcHRzID09PSAnZ2V0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaW5nbGVJbnN0LmdldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAob3B0cyA9PT0gJ3Jlc3VsdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2luZ2xlSW5zdC5yZXN1bHQuYXBwbHkoc2luZ2xlSW5zdCwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChvcHRzID09PSAnYmluZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2luZ2xlSW5zdC5iaW5kLmFwcGx5KHNpbmdsZUluc3QsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gJCh0aGlzKS5kYXRhKCdjcm9wcGllJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2QgPSBpW29wdHNdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkLmlzRnVuY3Rpb24obWV0aG9kKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXRob2QuYXBwbHkoaSwgYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRzID09PSAnZGVzdHJveScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlRGF0YSgnY3JvcHBpZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAnQ3JvcHBpZSAnICsgb3B0cyArICcgbWV0aG9kIG5vdCBmb3VuZCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IG5ldyBDcm9wcGllKHRoaXMsIG9wdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGkuJCA9ICQ7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKCdjcm9wcGllJywgaSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gQ3JvcHBpZShlbGVtZW50LCBvcHRzKSB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBkZWVwRXh0ZW5kKGRlZXBFeHRlbmQoe30sIENyb3BwaWUuZGVmYXVsdHMpLCBvcHRzKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbWcnKSB7XHJcbiAgICAgICAgICAgIHZhciBvcmlnSW1hZ2UgPSB0aGlzLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGFkZENsYXNzKG9yaWdJbWFnZSwgJ2NyLW9yaWdpbmFsLWltYWdlJyk7XHJcbiAgICAgICAgICAgIHNldEF0dHJpYnV0ZXMob3JpZ0ltYWdlLCB7J2FyaWEtaGlkZGVuJyA6ICd0cnVlJywgJ2FsdCcgOiAnJyB9KTtcclxuICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHJlcGxhY2VtZW50RGl2KTtcclxuICAgICAgICAgICAgcmVwbGFjZW1lbnREaXYuYXBwZW5kQ2hpbGQob3JpZ0ltYWdlKTtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gcmVwbGFjZW1lbnREaXY7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy51cmwgPSB0aGlzLm9wdGlvbnMudXJsIHx8IG9yaWdJbWFnZS5zcmM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBfY3JlYXRlLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy51cmwpIHtcclxuICAgICAgICAgICAgdmFyIGJpbmRPcHRzID0ge1xyXG4gICAgICAgICAgICAgICAgdXJsOiB0aGlzLm9wdGlvbnMudXJsLFxyXG4gICAgICAgICAgICAgICAgcG9pbnRzOiB0aGlzLm9wdGlvbnMucG9pbnRzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLm9wdGlvbnNbJ3VybCddO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5vcHRpb25zWydwb2ludHMnXTtcclxuICAgICAgICAgICAgX2JpbmQuY2FsbCh0aGlzLCBiaW5kT3B0cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIENyb3BwaWUuZGVmYXVsdHMgPSB7XHJcbiAgICAgICAgdmlld3BvcnQ6IHtcclxuICAgICAgICAgICAgd2lkdGg6IDEwMCxcclxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXHJcbiAgICAgICAgICAgIHR5cGU6ICdzcXVhcmUnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBib3VuZGFyeTogeyB9LFxyXG4gICAgICAgIG9yaWVudGF0aW9uQ29udHJvbHM6IHtcclxuICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgbGVmdENsYXNzOiAnJyxcclxuICAgICAgICAgICAgcmlnaHRDbGFzczogJydcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc2l6ZUNvbnRyb2xzOiB7XHJcbiAgICAgICAgICAgIHdpZHRoOiB0cnVlLFxyXG4gICAgICAgICAgICBoZWlnaHQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGN1c3RvbUNsYXNzOiAnJyxcclxuICAgICAgICBzaG93Wm9vbWVyOiB0cnVlLFxyXG4gICAgICAgIGVuYWJsZVpvb206IHRydWUsXHJcbiAgICAgICAgZW5hYmxlUmVzaXplOiBmYWxzZSxcclxuICAgICAgICBtb3VzZVdoZWVsWm9vbTogdHJ1ZSxcclxuICAgICAgICBlbmFibGVFeGlmOiBmYWxzZSxcclxuICAgICAgICBlbmZvcmNlQm91bmRhcnk6IHRydWUsXHJcbiAgICAgICAgZW5hYmxlT3JpZW50YXRpb246IGZhbHNlLFxyXG4gICAgICAgIGVuYWJsZUtleU1vdmVtZW50OiB0cnVlLFxyXG4gICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkgeyB9XHJcbiAgICB9O1xyXG5cclxuICAgIENyb3BwaWUuZ2xvYmFscyA9IHtcclxuICAgICAgICB0cmFuc2xhdGU6ICd0cmFuc2xhdGUzZCdcclxuICAgIH07XHJcblxyXG4gICAgZGVlcEV4dGVuZChDcm9wcGllLnByb3RvdHlwZSwge1xyXG4gICAgICAgIGJpbmQ6IGZ1bmN0aW9uIChvcHRpb25zLCBjYikge1xyXG4gICAgICAgICAgICByZXR1cm4gX2JpbmQuY2FsbCh0aGlzLCBvcHRpb25zLCBjYik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfZ2V0LmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBwb2ludHMgPSBkYXRhLnBvaW50cztcclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5yZWxhdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzWzBdIC89IHRoaXMuZWxlbWVudHMuaW1nLm5hdHVyYWxXaWR0aCAvIDEwMDtcclxuICAgICAgICAgICAgICAgIHBvaW50c1sxXSAvPSB0aGlzLmVsZW1lbnRzLmltZy5uYXR1cmFsSGVpZ2h0IC8gMTAwO1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzWzJdIC89IHRoaXMuZWxlbWVudHMuaW1nLm5hdHVyYWxXaWR0aCAvIDEwMDtcclxuICAgICAgICAgICAgICAgIHBvaW50c1szXSAvPSB0aGlzLmVsZW1lbnRzLmltZy5uYXR1cmFsSGVpZ2h0IC8gMTAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVzdWx0OiBmdW5jdGlvbiAodHlwZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3Jlc3VsdC5jYWxsKHRoaXMsIHR5cGUpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVmcmVzaDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX3JlZnJlc2guY2FsbCh0aGlzKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldFpvb206IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgIF9zZXRab29tZXJWYWwuY2FsbCh0aGlzLCB2KTtcclxuICAgICAgICAgICAgZGlzcGF0Y2hDaGFuZ2UodGhpcy5lbGVtZW50cy56b29tZXIpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcm90YXRlOiBmdW5jdGlvbiAoZGVnKSB7XHJcbiAgICAgICAgICAgIF9yb3RhdGUuY2FsbCh0aGlzLCBkZWcpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gX2Rlc3Ryb3kuY2FsbCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBleHBvcnRzLkNyb3BwaWUgPSB3aW5kb3cuQ3JvcHBpZSA9IENyb3BwaWU7XHJcblxyXG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmICEhbW9kdWxlLmV4cG9ydHMpIHtcclxuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IENyb3BwaWU7XHJcbiAgICB9XHJcbn0pKTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY3JvcHBpZS9jcm9wcGllLmpzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!************************************************!*\
  !*** ./node_modules/timers-browserify/main.js ***!
  \************************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

eval("var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\n__webpack_require__(/*! setimmediate */ 7);\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzP2Q3YWQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcGx5ID0gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5O1xuXG4vLyBET00gQVBJcywgZm9yIGNvbXBsZXRlbmVzc1xuXG5leHBvcnRzLnNldFRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0VGltZW91dCwgd2luZG93LCBhcmd1bWVudHMpLCBjbGVhclRpbWVvdXQpO1xufTtcbmV4cG9ydHMuc2V0SW50ZXJ2YWwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBUaW1lb3V0KGFwcGx5LmNhbGwoc2V0SW50ZXJ2YWwsIHdpbmRvdywgYXJndW1lbnRzKSwgY2xlYXJJbnRlcnZhbCk7XG59O1xuZXhwb3J0cy5jbGVhclRpbWVvdXQgPVxuZXhwb3J0cy5jbGVhckludGVydmFsID0gZnVuY3Rpb24odGltZW91dCkge1xuICBpZiAodGltZW91dCkge1xuICAgIHRpbWVvdXQuY2xvc2UoKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gVGltZW91dChpZCwgY2xlYXJGbikge1xuICB0aGlzLl9pZCA9IGlkO1xuICB0aGlzLl9jbGVhckZuID0gY2xlYXJGbjtcbn1cblRpbWVvdXQucHJvdG90eXBlLnVucmVmID0gVGltZW91dC5wcm90b3R5cGUucmVmID0gZnVuY3Rpb24oKSB7fTtcblRpbWVvdXQucHJvdG90eXBlLmNsb3NlID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuX2NsZWFyRm4uY2FsbCh3aW5kb3csIHRoaXMuX2lkKTtcbn07XG5cbi8vIERvZXMgbm90IHN0YXJ0IHRoZSB0aW1lLCBqdXN0IHNldHMgdXAgdGhlIG1lbWJlcnMgbmVlZGVkLlxuZXhwb3J0cy5lbnJvbGwgPSBmdW5jdGlvbihpdGVtLCBtc2Vjcykge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gbXNlY3M7XG59O1xuXG5leHBvcnRzLnVuZW5yb2xsID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG4gIGl0ZW0uX2lkbGVUaW1lb3V0ID0gLTE7XG59O1xuXG5leHBvcnRzLl91bnJlZkFjdGl2ZSA9IGV4cG9ydHMuYWN0aXZlID0gZnVuY3Rpb24oaXRlbSkge1xuICBjbGVhclRpbWVvdXQoaXRlbS5faWRsZVRpbWVvdXRJZCk7XG5cbiAgdmFyIG1zZWNzID0gaXRlbS5faWRsZVRpbWVvdXQ7XG4gIGlmIChtc2VjcyA+PSAwKSB7XG4gICAgaXRlbS5faWRsZVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gb25UaW1lb3V0KCkge1xuICAgICAgaWYgKGl0ZW0uX29uVGltZW91dClcbiAgICAgICAgaXRlbS5fb25UaW1lb3V0KCk7XG4gICAgfSwgbXNlY3MpO1xuICB9XG59O1xuXG4vLyBzZXRpbW1lZGlhdGUgYXR0YWNoZXMgaXRzZWxmIHRvIHRoZSBnbG9iYWwgb2JqZWN0XG5yZXF1aXJlKFwic2V0aW1tZWRpYXRlXCIpO1xuZXhwb3J0cy5zZXRJbW1lZGlhdGUgPSBzZXRJbW1lZGlhdGU7XG5leHBvcnRzLmNsZWFySW1tZWRpYXRlID0gY2xlYXJJbW1lZGlhdGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy90aW1lcnMtYnJvd3NlcmlmeS9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!***************************************************!*\
  !*** ./node_modules/setimmediate/setImmediate.js ***!
  \***************************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function(global, process) {(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(/*! ./../webpack/buildin/global.js */ 8), __webpack_require__(/*! ./../process/browser.js */ 9)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zZXRpbW1lZGlhdGUvc2V0SW1tZWRpYXRlLmpzPzliMmEiXSwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIChnbG9iYWwsIHVuZGVmaW5lZCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgaWYgKGdsb2JhbC5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0SGFuZGxlID0gMTsgLy8gU3BlYyBzYXlzIGdyZWF0ZXIgdGhhbiB6ZXJvXG4gICAgdmFyIHRhc2tzQnlIYW5kbGUgPSB7fTtcbiAgICB2YXIgY3VycmVudGx5UnVubmluZ0FUYXNrID0gZmFsc2U7XG4gICAgdmFyIGRvYyA9IGdsb2JhbC5kb2N1bWVudDtcbiAgICB2YXIgcmVnaXN0ZXJJbW1lZGlhdGU7XG5cbiAgICBmdW5jdGlvbiBzZXRJbW1lZGlhdGUoY2FsbGJhY2spIHtcbiAgICAgIC8vIENhbGxiYWNrIGNhbiBlaXRoZXIgYmUgYSBmdW5jdGlvbiBvciBhIHN0cmluZ1xuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGNhbGxiYWNrID0gbmV3IEZ1bmN0aW9uKFwiXCIgKyBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgICAvLyBDb3B5IGZ1bmN0aW9uIGFyZ3VtZW50c1xuICAgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpICsgMV07XG4gICAgICB9XG4gICAgICAvLyBTdG9yZSBhbmQgcmVnaXN0ZXIgdGhlIHRhc2tcbiAgICAgIHZhciB0YXNrID0geyBjYWxsYmFjazogY2FsbGJhY2ssIGFyZ3M6IGFyZ3MgfTtcbiAgICAgIHRhc2tzQnlIYW5kbGVbbmV4dEhhbmRsZV0gPSB0YXNrO1xuICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUobmV4dEhhbmRsZSk7XG4gICAgICByZXR1cm4gbmV4dEhhbmRsZSsrO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNsZWFySW1tZWRpYXRlKGhhbmRsZSkge1xuICAgICAgICBkZWxldGUgdGFza3NCeUhhbmRsZVtoYW5kbGVdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bih0YXNrKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IHRhc2suY2FsbGJhY2s7XG4gICAgICAgIHZhciBhcmdzID0gdGFzay5hcmdzO1xuICAgICAgICBzd2l0Y2ggKGFyZ3MubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgY2FsbGJhY2soYXJnc1swXSwgYXJnc1sxXSwgYXJnc1syXSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNhbGxiYWNrLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJ1bklmUHJlc2VudChoYW5kbGUpIHtcbiAgICAgICAgLy8gRnJvbSB0aGUgc3BlYzogXCJXYWl0IHVudGlsIGFueSBpbnZvY2F0aW9ucyBvZiB0aGlzIGFsZ29yaXRobSBzdGFydGVkIGJlZm9yZSB0aGlzIG9uZSBoYXZlIGNvbXBsZXRlZC5cIlxuICAgICAgICAvLyBTbyBpZiB3ZSdyZSBjdXJyZW50bHkgcnVubmluZyBhIHRhc2ssIHdlJ2xsIG5lZWQgdG8gZGVsYXkgdGhpcyBpbnZvY2F0aW9uLlxuICAgICAgICBpZiAoY3VycmVudGx5UnVubmluZ0FUYXNrKSB7XG4gICAgICAgICAgICAvLyBEZWxheSBieSBkb2luZyBhIHNldFRpbWVvdXQuIHNldEltbWVkaWF0ZSB3YXMgdHJpZWQgaW5zdGVhZCwgYnV0IGluIEZpcmVmb3ggNyBpdCBnZW5lcmF0ZWQgYVxuICAgICAgICAgICAgLy8gXCJ0b28gbXVjaCByZWN1cnNpb25cIiBlcnJvci5cbiAgICAgICAgICAgIHNldFRpbWVvdXQocnVuSWZQcmVzZW50LCAwLCBoYW5kbGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIHRhc2sgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gICAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IHRydWU7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcnVuKHRhc2spO1xuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW1tZWRpYXRlKGhhbmRsZSk7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRseVJ1bm5pbmdBVGFzayA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGluc3RhbGxOZXh0VGlja0ltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmdW5jdGlvbiAoKSB7IHJ1bklmUHJlc2VudChoYW5kbGUpOyB9KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjYW5Vc2VQb3N0TWVzc2FnZSgpIHtcbiAgICAgICAgLy8gVGhlIHRlc3QgYWdhaW5zdCBgaW1wb3J0U2NyaXB0c2AgcHJldmVudHMgdGhpcyBpbXBsZW1lbnRhdGlvbiBmcm9tIGJlaW5nIGluc3RhbGxlZCBpbnNpZGUgYSB3ZWIgd29ya2VyLFxuICAgICAgICAvLyB3aGVyZSBgZ2xvYmFsLnBvc3RNZXNzYWdlYCBtZWFucyBzb21ldGhpbmcgY29tcGxldGVseSBkaWZmZXJlbnQgYW5kIGNhbid0IGJlIHVzZWQgZm9yIHRoaXMgcHVycG9zZS5cbiAgICAgICAgaWYgKGdsb2JhbC5wb3N0TWVzc2FnZSAmJiAhZ2xvYmFsLmltcG9ydFNjcmlwdHMpIHtcbiAgICAgICAgICAgIHZhciBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvbGRPbk1lc3NhZ2UgPSBnbG9iYWwub25tZXNzYWdlO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHBvc3RNZXNzYWdlSXNBc3luY2hyb25vdXMgPSBmYWxzZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBnbG9iYWwucG9zdE1lc3NhZ2UoXCJcIiwgXCIqXCIpO1xuICAgICAgICAgICAgZ2xvYmFsLm9ubWVzc2FnZSA9IG9sZE9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBwb3N0TWVzc2FnZUlzQXN5bmNocm9ub3VzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIC8vIEluc3RhbGxzIGFuIGV2ZW50IGhhbmRsZXIgb24gYGdsb2JhbGAgZm9yIHRoZSBgbWVzc2FnZWAgZXZlbnQ6IHNlZVxuICAgICAgICAvLyAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL0RPTS93aW5kb3cucG9zdE1lc3NhZ2VcbiAgICAgICAgLy8gKiBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS9jb21tcy5odG1sI2Nyb3NzRG9jdW1lbnRNZXNzYWdlc1xuXG4gICAgICAgIHZhciBtZXNzYWdlUHJlZml4ID0gXCJzZXRJbW1lZGlhdGUkXCIgKyBNYXRoLnJhbmRvbSgpICsgXCIkXCI7XG4gICAgICAgIHZhciBvbkdsb2JhbE1lc3NhZ2UgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gZ2xvYmFsICYmXG4gICAgICAgICAgICAgICAgdHlwZW9mIGV2ZW50LmRhdGEgPT09IFwic3RyaW5nXCIgJiZcbiAgICAgICAgICAgICAgICBldmVudC5kYXRhLmluZGV4T2YobWVzc2FnZVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBydW5JZlByZXNlbnQoK2V2ZW50LmRhdGEuc2xpY2UobWVzc2FnZVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoZ2xvYmFsLmFkZEV2ZW50TGlzdGVuZXIpIHtcbiAgICAgICAgICAgIGdsb2JhbC5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UsIGZhbHNlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGdsb2JhbC5hdHRhY2hFdmVudChcIm9ubWVzc2FnZVwiLCBvbkdsb2JhbE1lc3NhZ2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGdsb2JhbC5wb3N0TWVzc2FnZShtZXNzYWdlUHJlZml4ICsgaGFuZGxlLCBcIipcIik7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5zdGFsbE1lc3NhZ2VDaGFubmVsSW1wbGVtZW50YXRpb24oKSB7XG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBldmVudC5kYXRhO1xuICAgICAgICAgICAgcnVuSWZQcmVzZW50KGhhbmRsZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmVnaXN0ZXJJbW1lZGlhdGUgPSBmdW5jdGlvbihoYW5kbGUpIHtcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoaGFuZGxlKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICB2YXIgaHRtbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG4gICAgICAgIHJlZ2lzdGVySW1tZWRpYXRlID0gZnVuY3Rpb24oaGFuZGxlKSB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgICAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJ1bklmUHJlc2VudChoYW5kbGUpO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICAgICAgICAgIGh0bWwucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgICAgICAgICBzY3JpcHQgPSBudWxsO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGh0bWwuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbnN0YWxsU2V0VGltZW91dEltcGxlbWVudGF0aW9uKCkge1xuICAgICAgICByZWdpc3RlckltbWVkaWF0ZSA9IGZ1bmN0aW9uKGhhbmRsZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dChydW5JZlByZXNlbnQsIDAsIGhhbmRsZSk7XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gSWYgc3VwcG9ydGVkLCB3ZSBzaG91bGQgYXR0YWNoIHRvIHRoZSBwcm90b3R5cGUgb2YgZ2xvYmFsLCBzaW5jZSB0aGF0IGlzIHdoZXJlIHNldFRpbWVvdXQgZXQgYWwuIGxpdmUuXG4gICAgdmFyIGF0dGFjaFRvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mICYmIE9iamVjdC5nZXRQcm90b3R5cGVPZihnbG9iYWwpO1xuICAgIGF0dGFjaFRvID0gYXR0YWNoVG8gJiYgYXR0YWNoVG8uc2V0VGltZW91dCA/IGF0dGFjaFRvIDogZ2xvYmFsO1xuXG4gICAgLy8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBlLmcuIGJyb3dzZXJpZnkgZW52aXJvbm1lbnRzLlxuICAgIGlmICh7fS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIpIHtcbiAgICAgICAgLy8gRm9yIE5vZGUuanMgYmVmb3JlIDAuOVxuICAgICAgICBpbnN0YWxsTmV4dFRpY2tJbXBsZW1lbnRhdGlvbigpO1xuXG4gICAgfSBlbHNlIGlmIChjYW5Vc2VQb3N0TWVzc2FnZSgpKSB7XG4gICAgICAgIC8vIEZvciBub24tSUUxMCBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFBvc3RNZXNzYWdlSW1wbGVtZW50YXRpb24oKTtcblxuICAgIH0gZWxzZSBpZiAoZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKSB7XG4gICAgICAgIC8vIEZvciB3ZWIgd29ya2Vycywgd2hlcmUgc3VwcG9ydGVkXG4gICAgICAgIGluc3RhbGxNZXNzYWdlQ2hhbm5lbEltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2UgaWYgKGRvYyAmJiBcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiIGluIGRvYy5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpKSB7XG4gICAgICAgIC8vIEZvciBJRSA24oCTOFxuICAgICAgICBpbnN0YWxsUmVhZHlTdGF0ZUNoYW5nZUltcGxlbWVudGF0aW9uKCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3Igb2xkZXIgYnJvd3NlcnNcbiAgICAgICAgaW5zdGFsbFNldFRpbWVvdXRJbXBsZW1lbnRhdGlvbigpO1xuICAgIH1cblxuICAgIGF0dGFjaFRvLnNldEltbWVkaWF0ZSA9IHNldEltbWVkaWF0ZTtcbiAgICBhdHRhY2hUby5jbGVhckltbWVkaWF0ZSA9IGNsZWFySW1tZWRpYXRlO1xufSh0eXBlb2Ygc2VsZiA9PT0gXCJ1bmRlZmluZWRcIiA/IHR5cGVvZiBnbG9iYWwgPT09IFwidW5kZWZpbmVkXCIgPyB0aGlzIDogZ2xvYmFsIDogc2VsZikpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvc2V0aW1tZWRpYXRlL3NldEltbWVkaWF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanM/MzY5OCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZztcclxuXHJcbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXHJcbmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuIHRoaXM7XHJcbn0pKCk7XHJcblxyXG50cnkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxyXG5cdGcgPSBnIHx8IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSB8fCAoMSxldmFsKShcInRoaXNcIik7XHJcbn0gY2F0Y2goZSkge1xyXG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXHJcblx0aWYodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIilcclxuXHRcdGcgPSB3aW5kb3c7XHJcbn1cclxuXHJcbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cclxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3NcclxuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!*****************************************!*\
  !*** ./node_modules/process/browser.js ***!
  \*****************************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanM/NWI2OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!****************************!*\
  !*** ./src/component.html ***!
  \****************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"photoContainer\\\"\\n     ng-class=\\\"{'photoCircle': $ctrl.type == 'circle'}\\\"\\n     ng-style=\\\"{ width: $ctrl.width + 'px', height: $ctrl.height + 'px' }\\\">\\n\\n    <img data-action=\\\"zoom\\\" \\n         ng-src=\\\"{{$ctrl.image}}\\\"\\n         ng-class=\\\"{'photoCircle': $ctrl.type == 'circle'}\\\"\\n         ng-style=\\\"{ width: ($ctrl.width - 10) + 'px', height: ($ctrl.height - 10) + 'px' }\\\"/>\\n\\n    <input type=\\\"file\\\" \\n           name=\\\"picker\\\" \\n           accept=\\\"image/x-png,image/gif,image/jpeg\\\"/>\\n\\n    <div class=\\\"photoPicker\\\" \\n         ng-style=\\\"{ width: ($ctrl.width - 10) + 'px' }\\\" \\n         data-ng-click=\\\"$ctrl.input.click()\\\">\\n        <i class=\\\"material-icons\\\">photo_camera</i>\\n        {{$ctrl.pickerText ? $ctrl.pickerText : 'Atualizar foto'}}\\n    </div>\\n\\n</div>\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50Lmh0bWw/MDE5NyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwicGhvdG9Db250YWluZXJcXFwiXFxuICAgICBuZy1jbGFzcz1cXFwieydwaG90b0NpcmNsZSc6ICRjdHJsLnR5cGUgPT0gJ2NpcmNsZSd9XFxcIlxcbiAgICAgbmctc3R5bGU9XFxcInsgd2lkdGg6ICRjdHJsLndpZHRoICsgJ3B4JywgaGVpZ2h0OiAkY3RybC5oZWlnaHQgKyAncHgnIH1cXFwiPlxcblxcbiAgICA8aW1nIGRhdGEtYWN0aW9uPVxcXCJ6b29tXFxcIiBcXG4gICAgICAgICBuZy1zcmM9XFxcInt7JGN0cmwuaW1hZ2V9fVxcXCJcXG4gICAgICAgICBuZy1jbGFzcz1cXFwieydwaG90b0NpcmNsZSc6ICRjdHJsLnR5cGUgPT0gJ2NpcmNsZSd9XFxcIlxcbiAgICAgICAgIG5nLXN0eWxlPVxcXCJ7IHdpZHRoOiAoJGN0cmwud2lkdGggLSAxMCkgKyAncHgnLCBoZWlnaHQ6ICgkY3RybC5oZWlnaHQgLSAxMCkgKyAncHgnIH1cXFwiLz5cXG5cXG4gICAgPGlucHV0IHR5cGU9XFxcImZpbGVcXFwiIFxcbiAgICAgICAgICAgbmFtZT1cXFwicGlja2VyXFxcIiBcXG4gICAgICAgICAgIGFjY2VwdD1cXFwiaW1hZ2UveC1wbmcsaW1hZ2UvZ2lmLGltYWdlL2pwZWdcXFwiLz5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwicGhvdG9QaWNrZXJcXFwiIFxcbiAgICAgICAgIG5nLXN0eWxlPVxcXCJ7IHdpZHRoOiAoJGN0cmwud2lkdGggLSAxMCkgKyAncHgnIH1cXFwiIFxcbiAgICAgICAgIGRhdGEtbmctY2xpY2s9XFxcIiRjdHJsLmlucHV0LmNsaWNrKClcXFwiPlxcbiAgICAgICAgPGkgY2xhc3M9XFxcIm1hdGVyaWFsLWljb25zXFxcIj5waG90b19jYW1lcmE8L2k+XFxuICAgICAgICB7eyRjdHJsLnBpY2tlclRleHQgPyAkY3RybC5waWNrZXJUZXh0IDogJ0F0dWFsaXphciBmb3RvJ319XFxuICAgIDwvZGl2PlxcblxcbjwvZGl2PlwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2NvbXBvbmVudC5odG1sXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!**********************************!*\
  !*** ./src/crop/modal.crop.html ***!
  \**********************************/
/*! dynamic exports provided */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = \"<div class=\\\"modal-heading\\\">\\n\\n    <label>{{$ctrl.cropTitle ? $ctrl.cropTitle : 'Criar novo recorte'}}</label>\\n\\n</div>\\n\\n<div class=\\\"modal-footer\\\">\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-md-12\\\">\\n\\n            <button class=\\\"cancel\\\" data-ng-click=\\\"$ctrl.close()\\\">Cancelar</button>\\n            <button class=\\\"crop-btn\\\" data-ng-click=\\\"$ctrl.save()\\\">Salvar</button>\\n\\n        </div>\\n    </div>\\n</div>\\n\\n<div class=\\\"modal-body\\\">\\n\\n    <div id=\\\"cropElem\\\" ng-init=\\\"$ctrl.createCrop()\\\"></div>\\n\\n\\n    <div class=\\\"footer\\\">\\n\\n    </div>\\n\\n</div>\";//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY3JvcC9tb2RhbC5jcm9wLmh0bWw/NzZlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1cXFwibW9kYWwtaGVhZGluZ1xcXCI+XFxuXFxuICAgIDxsYWJlbD57eyRjdHJsLmNyb3BUaXRsZSA/ICRjdHJsLmNyb3BUaXRsZSA6ICdDcmlhciBub3ZvIHJlY29ydGUnfX08L2xhYmVsPlxcblxcbjwvZGl2PlxcblxcbjxkaXYgY2xhc3M9XFxcIm1vZGFsLWZvb3RlclxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcInJvd1xcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb2wtbWQtMTJcXFwiPlxcblxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNhbmNlbFxcXCIgZGF0YS1uZy1jbGljaz1cXFwiJGN0cmwuY2xvc2UoKVxcXCI+Q2FuY2VsYXI8L2J1dHRvbj5cXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJjcm9wLWJ0blxcXCIgZGF0YS1uZy1jbGljaz1cXFwiJGN0cmwuc2F2ZSgpXFxcIj5TYWx2YXI8L2J1dHRvbj5cXG5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cXG5cXG48ZGl2IGNsYXNzPVxcXCJtb2RhbC1ib2R5XFxcIj5cXG5cXG4gICAgPGRpdiBpZD1cXFwiY3JvcEVsZW1cXFwiIG5nLWluaXQ9XFxcIiRjdHJsLmNyZWF0ZUNyb3AoKVxcXCI+PC9kaXY+XFxuXFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImZvb3RlclxcXCI+XFxuXFxuICAgIDwvZGl2PlxcblxcbjwvZGl2PlwiO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2Nyb3AvbW9kYWwuY3JvcC5odG1sXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ })
/******/ ]);